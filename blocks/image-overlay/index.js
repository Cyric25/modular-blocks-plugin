(()=>{"use strict";var e,l={939:()=>{const e=window.wp.blocks,l=window.wp.i18n,a=window.wp.blockEditor,i=window.wp.components,n=window.wp.element,o=window.wp.primitives,s=window.ReactJSXRuntime,r=(0,s.jsx)(o.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,s.jsx)(o.Path,{fillRule:"evenodd",clipRule:"evenodd",d:"M12 5.5A2.25 2.25 0 0 0 9.878 7h4.244A2.251 2.251 0 0 0 12 5.5ZM12 4a3.751 3.751 0 0 0-3.675 3H5v1.5h1.27l.818 8.997a2.75 2.75 0 0 0 2.739 2.501h4.347a2.75 2.75 0 0 0 2.738-2.5L17.73 8.5H19V7h-3.325A3.751 3.751 0 0 0 12 4Zm4.224 4.5H7.776l.806 8.861a1.25 1.25 0 0 0 1.245 1.137h4.347a1.25 1.25 0 0 0 1.245-1.137l.805-8.861Z"})}),t=(0,s.jsx)(o.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,s.jsx)(o.Path,{d:"M11 12.5V17.5H12.5V12.5H17.5V11H12.5V6H11V11H6V12.5H11Z"})});(0,e.registerBlockType)("modular-blocks/image-overlay",{edit:({attributes:e,setAttributes:o,className:d})=>{const{baseImage:c,layers:u,title:b,description:g,height:p,showLabels:m,showDescriptions:h,allowMultipleVisible:x,displayMode:v,transitionDuration:_,buttonStyle:k,buttonPosition:j,buttonSize:y,responsiveHeight:w}=e,C=e=>{o({baseImage:{url:e.url,alt:e.alt,id:e.id}})},B=(e,l,a)=>{const i=[...u];i[e]="image"===l?{...i[e],image:a}:{...i[e],[l]:a},o({layers:i})},f=e=>{const l=[...u];x||l[e].visible?l[e].visible=!l[e].visible:l.forEach((a,i)=>{l[i].visible=i===e}),o({layers:l})},N={"--overlay-height":`${p}px`,"--transition-duration":`${_}ms`},S=[d,"wp-block-modular-blocks-image-overlay","editor-view",`button-style-${k}`,`button-position-${j}`,`button-size-${y}`,`display-mode-${v||"overlay"}`,w?"responsive-height":"fixed-height",m?"has-labels":"",h?"has-descriptions":"",x?"multiple-visible":"single-visible"].filter(Boolean).join(" ");return c.url?(0,s.jsxs)(n.Fragment,{children:[(0,s.jsxs)(a.InspectorControls,{children:[(0,s.jsxs)(i.PanelBody,{title:(0,l.__)("Basis-Bild","modular-blocks-plugin"),children:[(0,s.jsx)("div",{style:{marginBottom:"15px"},children:(0,s.jsx)("img",{src:c.url,alt:c.alt,style:{width:"100%",borderRadius:"4px"}})}),(0,s.jsxs)(i.__experimentalHStack,{children:[(0,s.jsx)(a.MediaUploadCheck,{children:(0,s.jsx)(a.MediaUpload,{onSelect:C,allowedTypes:["image"],value:c.id,render:({open:e})=>(0,s.jsx)(i.Button,{onClick:e,variant:"secondary",size:"small",children:(0,l.__)("Ändern","modular-blocks-plugin")})})}),(0,s.jsx)(i.Button,{onClick:()=>{o({baseImage:{url:"",alt:"Basis-Bild",id:null}})},variant:"tertiary",size:"small",isDestructive:!0,children:(0,l.__)("Entfernen","modular-blocks-plugin")})]})]}),(0,s.jsxs)(i.PanelBody,{title:(0,l.__)("Überlagerungs-Ebenen","modular-blocks-plugin"),children:[u.map((e,n)=>(0,s.jsxs)(i.Card,{style:{marginBottom:"16px"},children:[(0,s.jsx)(i.CardHeader,{children:(0,s.jsxs)(i.__experimentalHStack,{justify:"space-between",children:[(0,s.jsx)("strong",{children:e.label||`Ebene ${n+1}`}),(0,s.jsx)(i.__experimentalHStack,{children:u.length>1&&(0,s.jsx)(i.Button,{onClick:()=>(e=>{if(u.length<=1)return;const l=u.filter((l,a)=>a!==e);o({layers:l})})(n),icon:r,variant:"tertiary",size:"small",isDestructive:!0,label:(0,l.__)("Ebene entfernen","modular-blocks-plugin")})})]})}),(0,s.jsx)(i.CardBody,{children:(0,s.jsxs)(i.__experimentalVStack,{spacing:"3",children:[(0,s.jsx)(i.TextControl,{label:(0,l.__)("Ebenen-Name","modular-blocks-plugin"),value:e.label,onChange:e=>B(n,"label",e)}),(0,s.jsx)(i.TextControl,{label:(0,l.__)("Beschreibung","modular-blocks-plugin"),value:e.description,onChange:e=>B(n,"description",e)}),e.image.url?(0,s.jsxs)("div",{children:[(0,s.jsx)("img",{src:e.image.url,alt:e.image.alt,style:{width:"100%",borderRadius:"4px",marginBottom:"8px"}}),(0,s.jsxs)(i.__experimentalHStack,{children:[(0,s.jsx)(a.MediaUploadCheck,{children:(0,s.jsx)(a.MediaUpload,{onSelect:e=>B(n,"image",{url:e.url,alt:e.alt,id:e.id}),allowedTypes:["image"],value:e.image.id,render:({open:e})=>(0,s.jsx)(i.Button,{onClick:e,variant:"secondary",size:"small",children:(0,l.__)("Ändern","modular-blocks-plugin")})})}),(0,s.jsx)(i.Button,{onClick:()=>B(n,"image",{url:"",alt:"",id:null}),variant:"tertiary",size:"small",isDestructive:!0,children:(0,l.__)("Entfernen","modular-blocks-plugin")})]})]}):(0,s.jsx)(a.MediaUploadCheck,{children:(0,s.jsx)(a.MediaUpload,{onSelect:e=>B(n,"image",{url:e.url,alt:e.alt,id:e.id}),allowedTypes:["image"],value:e.image.id,render:({open:e})=>(0,s.jsx)(i.Button,{onClick:e,variant:"primary",style:{width:"100%"},children:(0,l.__)("Bild auswählen","modular-blocks-plugin")})})}),(0,s.jsx)(i.RangeControl,{label:(0,l.__)("Transparenz (%)","modular-blocks-plugin"),value:e.opacity,onChange:e=>B(n,"opacity",e),min:0,max:100,step:5}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{style:{display:"block",marginBottom:"8px",fontWeight:600},children:(0,l.__)("Ebenen-Farbe","modular-blocks-plugin")}),(0,s.jsx)(i.ColorPicker,{color:e.color,onChangeComplete:e=>B(n,"color",e.hex)})]}),(0,s.jsx)(i.ToggleControl,{label:(0,l.__)("Standardmäßig sichtbar","modular-blocks-plugin"),checked:e.visible,onChange:e=>B(n,"visible",e)})]})})]},n)),(0,s.jsx)(i.Button,{onClick:()=>{const e=[...u,{image:{url:"",alt:"",id:null},label:`Ebene ${u.length+1}`,description:`Überlagerungs-Ebene ${u.length+1}`,opacity:100,visible:!1,color:"#0073aa"}];o({layers:e})},icon:t,variant:"secondary",disabled:u.length>=10,style:{width:"100%"},children:(0,l.__)("Ebene hinzufügen","modular-blocks-plugin")})]}),(0,s.jsxs)(i.PanelBody,{title:(0,l.__)("Darstellungs-Einstellungen","modular-blocks-plugin"),children:[(0,s.jsx)(i.ToggleControl,{label:(0,l.__)("Responsive Höhe","modular-blocks-plugin"),checked:w,onChange:e=>o({responsiveHeight:e}),help:w?(0,l.__)("Höhe passt sich automatisch an die Bildgröße an.","modular-blocks-plugin"):(0,l.__)("Feste Höhe verwenden.","modular-blocks-plugin")}),!w&&(0,s.jsx)(i.RangeControl,{label:(0,l.__)("Höhe (px)","modular-blocks-plugin"),value:p,onChange:e=>o({height:e}),min:200,max:800,step:10}),(0,s.jsx)(i.SelectControl,{label:(0,l.__)("Button-Stil","modular-blocks-plugin"),value:k,onChange:e=>o({buttonStyle:e}),options:[{label:(0,l.__)("Tabs","modular-blocks-plugin"),value:"tabs"},{label:(0,l.__)("Buttons","modular-blocks-plugin"),value:"buttons"},{label:(0,l.__)("Pills","modular-blocks-plugin"),value:"pills"}]}),(0,s.jsx)(i.SelectControl,{label:(0,l.__)("Button-Größe","modular-blocks-plugin"),value:y,onChange:e=>o({buttonSize:e}),options:[{label:(0,l.__)("Klein","modular-blocks-plugin"),value:"small"},{label:(0,l.__)("Mittel","modular-blocks-plugin"),value:"medium"},{label:(0,l.__)("Groß","modular-blocks-plugin"),value:"large"}]}),(0,s.jsx)(i.SelectControl,{label:(0,l.__)("Button-Position","modular-blocks-plugin"),value:j,onChange:e=>o({buttonPosition:e}),options:[{label:(0,l.__)("Oben","modular-blocks-plugin"),value:"top"},{label:(0,l.__)("Unten","modular-blocks-plugin"),value:"bottom"},{label:(0,l.__)("Links","modular-blocks-plugin"),value:"left"},{label:(0,l.__)("Rechts","modular-blocks-plugin"),value:"right"}]}),(0,s.jsx)(i.RangeControl,{label:(0,l.__)("Übergangs-Geschwindigkeit (ms)","modular-blocks-plugin"),value:_,onChange:e=>o({transitionDuration:e}),min:0,max:2e3,step:50})]}),(0,s.jsxs)(i.PanelBody,{title:(0,l.__)("Verhalten","modular-blocks-plugin"),children:[(0,s.jsx)(i.SelectControl,{label:(0,l.__)("Anzeigemodus","modular-blocks-plugin"),value:e.displayMode||"overlay",onChange:e=>{o({displayMode:e,allowMultipleVisible:"overlay"===e})},options:[{label:(0,l.__)("Übereinander (Overlay)","modular-blocks-plugin"),value:"overlay"},{label:(0,l.__)("Abwechselnd (Toggle)","modular-blocks-plugin"),value:"toggle"}],help:"overlay"===e.displayMode?(0,l.__)("Mehrere Ebenen können gleichzeitig sichtbar sein (für Überlagerungen mit Transparenz).","modular-blocks-plugin"):(0,l.__)("Nur eine Ebene ist zur Zeit sichtbar (zum Umschalten zwischen Bildern).","modular-blocks-plugin")}),(0,s.jsx)(i.ToggleControl,{label:(0,l.__)("Ebenen-Namen anzeigen","modular-blocks-plugin"),checked:m,onChange:e=>o({showLabels:e})}),(0,s.jsx)(i.ToggleControl,{label:(0,l.__)("Beschreibungen anzeigen","modular-blocks-plugin"),checked:h,onChange:e=>o({showDescriptions:e})})]})]}),(0,s.jsx)("div",{className:S,style:N,children:(0,s.jsxs)("div",{className:"image-overlay-container",children:[(0,s.jsxs)("div",{className:"overlay-header",children:[(0,s.jsx)(a.RichText,{tagName:"h3",className:"overlay-title",value:b,onChange:e=>o({title:e}),placeholder:(0,l.__)("Titel eingeben...","modular-blocks-plugin"),allowedFormats:["core/bold","core/italic"]}),(0,s.jsx)(a.RichText,{tagName:"div",className:"overlay-description",value:g,onChange:e=>o({description:e}),placeholder:(0,l.__)("Beschreibung eingeben...","modular-blocks-plugin"),allowedFormats:["core/bold","core/italic"]})]}),("top"===j||"bottom"===j)&&(0,s.jsx)("div",{className:`layer-controls controls-${j}`,children:(0,s.jsx)("div",{className:"control-buttons",children:u.map((e,l)=>(0,s.jsxs)("button",{type:"button",className:"layer-button "+(e.visible?"active":""),onClick:()=>f(l),children:[(0,s.jsx)("span",{className:"button-indicator"}),m&&(0,s.jsx)("span",{className:"button-label",children:e.label})]},l))})}),(0,s.jsxs)("div",{className:"overlay-viewport",children:[("left"===j||"right"===j)&&(0,s.jsx)("div",{className:`layer-controls controls-${j}`,children:(0,s.jsx)("div",{className:"control-buttons",children:u.map((e,l)=>(0,s.jsxs)("button",{type:"button",className:"layer-button "+(e.visible?"active":""),onClick:()=>f(l),children:[(0,s.jsx)("span",{className:"button-indicator"}),m&&(0,s.jsx)("span",{className:"button-label",children:e.label})]},l))})}),(0,s.jsxs)("div",{className:"image-stack",children:[(0,s.jsx)("div",{className:"base-layer",children:(0,s.jsx)("img",{src:c.url,alt:c.alt,className:"base-image"})}),u.map((e,l)=>e.image.url?(0,s.jsx)("div",{className:"overlay-layer "+(e.visible?"visible":"hidden"),style:{opacity:e.visible?e.opacity/100:0},children:(0,s.jsx)("img",{src:e.image.url,alt:e.image.alt,className:"overlay-image"})},l):null)]})]}),(0,s.jsx)("div",{className:"editor-notice",style:{marginTop:"15px",padding:"10px",backgroundColor:"#f0f6fc",borderLeft:"4px solid #0073aa",fontSize:"12px",color:"#646970"},children:(0,l.__)("Vorschau: Die vollständige Interaktivität funktioniert im Frontend. Im Editor können Sie die Ebenen durch Klicken umschalten.","modular-blocks-plugin")})]})})]}):(0,s.jsxs)(n.Fragment,{children:[(0,s.jsx)(a.InspectorControls,{children:(0,s.jsx)(i.PanelBody,{title:(0,l.__)("Basis-Bild","modular-blocks-plugin"),children:(0,s.jsx)(a.MediaUploadCheck,{children:(0,s.jsx)(a.MediaUpload,{onSelect:C,allowedTypes:["image"],value:c.id,render:({open:e})=>(0,s.jsx)(i.Button,{onClick:e,variant:"primary",style:{width:"100%"},children:(0,l.__)("Basis-Bild auswählen","modular-blocks-plugin")})})})})}),(0,s.jsxs)("div",{style:{padding:"40px",textAlign:"center",border:"2px dashed #ddd",borderRadius:"8px",background:"#f9f9f9"},children:[(0,s.jsx)("h4",{children:(0,l.__)("Bild-Überlagerung","modular-blocks-plugin")}),(0,s.jsx)("p",{children:(0,l.__)("Laden Sie ein Basis-Bild hoch, um zu beginnen.","modular-blocks-plugin")}),(0,s.jsx)(a.MediaUploadCheck,{children:(0,s.jsx)(a.MediaUpload,{onSelect:C,allowedTypes:["image"],value:c.id,render:({open:e})=>(0,s.jsx)(i.Button,{onClick:e,variant:"primary",children:(0,l.__)("Basis-Bild auswählen","modular-blocks-plugin")})})})]})]})},save:()=>null})}},a={};function i(e){var n=a[e];if(void 0!==n)return n.exports;var o=a[e]={exports:{}};return l[e](o,o.exports,i),o.exports}i.m=l,e=[],i.O=(l,a,n,o)=>{if(!a){var s=1/0;for(c=0;c<e.length;c++){for(var[a,n,o]=e[c],r=!0,t=0;t<a.length;t++)(!1&o||s>=o)&&Object.keys(i.O).every(e=>i.O[e](a[t]))?a.splice(t--,1):(r=!1,o<s&&(s=o));if(r){e.splice(c--,1);var d=n();void 0!==d&&(l=d)}}return l}o=o||0;for(var c=e.length;c>0&&e[c-1][2]>o;c--)e[c]=e[c-1];e[c]=[a,n,o]},i.o=(e,l)=>Object.prototype.hasOwnProperty.call(e,l),(()=>{var e={5:0,985:0};i.O.j=l=>0===e[l];var l=(l,a)=>{var n,o,[s,r,t]=a,d=0;if(s.some(l=>0!==e[l])){for(n in r)i.o(r,n)&&(i.m[n]=r[n]);if(t)var c=t(i)}for(l&&l(a);d<s.length;d++)o=s[d],i.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return i.O(c)},a=globalThis.webpackChunkmodular_blocks_plugin=globalThis.webpackChunkmodular_blocks_plugin||[];a.forEach(l.bind(null,0)),a.push=l.bind(null,a.push.bind(a))})();var n=i.O(void 0,[985],()=>i(939));n=i.O(n)})();