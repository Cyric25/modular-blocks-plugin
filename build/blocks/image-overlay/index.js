(()=>{"use strict";var e={20:(e,l,t)=>{var a=t(609),n=Symbol.for("react.element"),o=(Symbol.for("react.fragment"),Object.prototype.hasOwnProperty),i=a.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,r={key:!0,ref:!0,__self:!0,__source:!0};l.jsx=function(e,l,t){var a,s={},c=null,u=null;for(a in void 0!==t&&(c=""+t),void 0!==l.key&&(c=""+l.key),void 0!==l.ref&&(u=l.ref),l)o.call(l,a)&&!r.hasOwnProperty(a)&&(s[a]=l[a]);if(e&&e.defaultProps)for(a in l=e.defaultProps)void 0===s[a]&&(s[a]=l[a]);return{$$typeof:n,type:e,key:c,ref:u,props:s,_owner:i.current}}},609:e=>{e.exports=window.React},848:(e,l,t)=>{e.exports=t(20)}},l={};function t(a){var n=l[a];if(void 0!==n)return n.exports;var o=l[a]={exports:{}};return e[a](o,o.exports,t),o.exports}var a=t(609);const n=window.wp.blocks,o=window.wp.blockEditor,i=window.wp.components,r=window.wp.i18n,s=window.wp.primitives;var c=t(848);const u=(0,c.jsx)(s.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,c.jsx)(s.Path,{fillRule:"evenodd",clipRule:"evenodd",d:"M12 5.5A2.25 2.25 0 0 0 9.878 7h4.244A2.251 2.251 0 0 0 12 5.5ZM12 4a3.751 3.751 0 0 0-3.675 3H5v1.5h1.27l.818 8.997a2.75 2.75 0 0 0 2.739 2.501h4.347a2.75 2.75 0 0 0 2.738-2.5L17.73 8.5H19V7h-3.325A3.751 3.751 0 0 0 12 4Zm4.224 4.5H7.776l.806 8.861a1.25 1.25 0 0 0 1.245 1.137h4.347a1.25 1.25 0 0 0 1.245-1.137l.805-8.861Z"})}),m=(0,c.jsx)(s.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,c.jsx)(s.Path,{d:"M11 12.5V17.5H12.5V12.5H17.5V11H12.5V6H11V11H6V12.5H11Z"})});(0,n.registerBlockType)("modular-blocks/image-overlay",{edit:({attributes:e,setAttributes:l})=>{const{baseImage:t,layers:n,title:s,description:c,height:d,showLabels:p,showDescriptions:g,allowMultipleVisible:b,transitionDuration:y,buttonStyle:v,buttonPosition:h}=e,_=(0,o.useBlockProps)(),E=(e,t,a)=>{const o=[...n];o[e]={...o[e],[t]:a},l({layers:o})},k=e=>{const t=[...n];b?t[e].visible=!t[e].visible:t.forEach((l,a)=>{t[a].visible=a===e&&!t[a].visible}),l({layers:t})};return(0,a.createElement)(a.Fragment,null,(0,a.createElement)(o.InspectorControls,null,(0,a.createElement)(i.PanelBody,{title:(0,r.__)("Basis-Bild","modular-blocks-plugin")},(0,a.createElement)(o.MediaUploadCheck,null,(0,a.createElement)(o.MediaUpload,{onSelect:e=>{l({baseImage:{url:e.url,alt:e.alt,id:e.id}})},allowedTypes:["image"],value:t.id,render:({open:e})=>(0,a.createElement)(i.Button,{onClick:e,variant:"secondary"},t.url?(0,r.__)("Bild ändern","modular-blocks-plugin"):(0,r.__)("Bild auswählen","modular-blocks-plugin"))})),t.url&&(0,a.createElement)(a.Fragment,null,(0,a.createElement)("img",{src:t.url,alt:t.alt,style:{maxWidth:"100%",marginTop:"10px",borderRadius:"4px"}}),(0,a.createElement)(i.Button,{onClick:()=>{l({baseImage:{url:"",alt:"",id:null}})},variant:"tertiary",isDestructive:!0,style:{marginTop:"5px"}},(0,r.__)("Entfernen","modular-blocks-plugin")))),(0,a.createElement)(i.PanelBody,{title:(0,r.__)("Einstellungen","modular-blocks-plugin")},(0,a.createElement)(i.TextControl,{label:(0,r.__)("Titel","modular-blocks-plugin"),value:s,onChange:e=>l({title:e})}),(0,a.createElement)(i.TextControl,{label:(0,r.__)("Beschreibung","modular-blocks-plugin"),value:c,onChange:e=>l({description:e})}),(0,a.createElement)(i.RangeControl,{label:(0,r.__)("Höhe (px)","modular-blocks-plugin"),value:d,onChange:e=>l({height:e}),min:200,max:800}),(0,a.createElement)(i.ToggleControl,{label:(0,r.__)("Labels anzeigen","modular-blocks-plugin"),checked:p,onChange:e=>l({showLabels:e})}),(0,a.createElement)(i.ToggleControl,{label:(0,r.__)("Beschreibungen anzeigen","modular-blocks-plugin"),checked:g,onChange:e=>l({showDescriptions:e})}),(0,a.createElement)(i.ToggleControl,{label:(0,r.__)("Mehrere Ebenen gleichzeitig sichtbar","modular-blocks-plugin"),checked:b,onChange:e=>l({allowMultipleVisible:e})}),(0,a.createElement)(i.RangeControl,{label:(0,r.__)("Übergangs-Dauer (ms)","modular-blocks-plugin"),value:y,onChange:e=>l({transitionDuration:e}),min:0,max:1e3,step:50}),(0,a.createElement)(i.SelectControl,{label:(0,r.__)("Button-Stil","modular-blocks-plugin"),value:v,options:[{label:(0,r.__)("Tabs","modular-blocks-plugin"),value:"tabs"},{label:(0,r.__)("Buttons","modular-blocks-plugin"),value:"buttons"},{label:(0,r.__)("Checkboxen","modular-blocks-plugin"),value:"checkboxes"}],onChange:e=>l({buttonStyle:e})}),(0,a.createElement)(i.SelectControl,{label:(0,r.__)("Button-Position","modular-blocks-plugin"),value:h,options:[{label:(0,r.__)("Oben","modular-blocks-plugin"),value:"top"},{label:(0,r.__)("Unten","modular-blocks-plugin"),value:"bottom"},{label:(0,r.__)("Links","modular-blocks-plugin"),value:"left"},{label:(0,r.__)("Rechts","modular-blocks-plugin"),value:"right"}],onChange:e=>l({buttonPosition:e})})),(0,a.createElement)(i.PanelBody,{title:(0,r.__)("Ebenen","modular-blocks-plugin"),initialOpen:!1},n.map((e,t)=>(0,a.createElement)(i.Card,{key:t,style:{marginBottom:"10px"}},(0,a.createElement)(i.CardHeader,null,(0,a.createElement)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%"}},(0,a.createElement)("div",{style:{display:"flex",alignItems:"center",gap:"8px"}},(0,a.createElement)("input",{type:"checkbox",checked:e.visible,onChange:()=>k(t)}),(0,a.createElement)("strong",null,e.label)),(0,a.createElement)(i.Button,{onClick:()=>(e=>{if(n.length<=1)return;const t=n.filter((l,t)=>t!==e);l({layers:t})})(t),icon:u,variant:"tertiary",size:"small",isDestructive:!0}))),(0,a.createElement)(i.CardBody,null,(0,a.createElement)(i.TextControl,{label:(0,r.__)("Label","modular-blocks-plugin"),value:e.label,onChange:e=>E(t,"label",e)}),(0,a.createElement)(i.TextControl,{label:(0,r.__)("Beschreibung","modular-blocks-plugin"),value:e.description,onChange:e=>E(t,"description",e)}),(0,a.createElement)(o.MediaUploadCheck,null,(0,a.createElement)(o.MediaUpload,{onSelect:e=>((e,t)=>{const a=[...n];a[e]={...a[e],image:{url:t.url,alt:t.alt,id:t.id}},l({layers:a})})(t,e),allowedTypes:["image"],value:e.image.id,render:({open:l})=>(0,a.createElement)(i.Button,{onClick:l,variant:"secondary",size:"small"},e.image.url?(0,r.__)("Bild ändern","modular-blocks-plugin"):(0,r.__)("Bild auswählen","modular-blocks-plugin"))})),e.image.url&&(0,a.createElement)("img",{src:e.image.url,alt:e.image.alt,style:{maxWidth:"100%",marginTop:"10px"}}),(0,a.createElement)(i.RangeControl,{label:(0,r.__)("Deckkraft (%)","modular-blocks-plugin"),value:e.opacity,onChange:e=>E(t,"opacity",e),min:0,max:100})))),(0,a.createElement)(i.Button,{onClick:()=>{const e=[...n,{image:{url:"",alt:"",id:null},label:`Ebene ${n.length+1}`,description:"",opacity:100,visible:!1,color:"#0073aa"}];l({layers:e})},icon:m,variant:"secondary"},(0,r.__)("Ebene hinzufügen","modular-blocks-plugin")))),(0,a.createElement)("div",{..._},(0,a.createElement)("div",{className:"image-overlay-container"},s&&(0,a.createElement)("h3",null,s),c&&(0,a.createElement)("p",null,c),(0,a.createElement)("div",{className:"layer-controls",style:{marginBottom:"10px"}},n.map((e,l)=>(0,a.createElement)(i.Button,{key:l,onClick:()=>k(l),variant:e.visible?"primary":"secondary",size:"small",style:{marginRight:"5px"}},e.label))),(0,a.createElement)("div",{className:"overlay-preview",style:{height:`${d}px`,position:"relative",border:"1px solid #ddd"}},t.url?(0,a.createElement)(a.Fragment,null,(0,a.createElement)("img",{src:t.url,alt:t.alt,style:{width:"100%",height:"100%",objectFit:"cover",position:"absolute",top:0,left:0}}),n.map((e,l)=>e.visible&&e.image.url&&(0,a.createElement)("img",{key:l,src:e.image.url,alt:e.image.alt,style:{width:"100%",height:"100%",objectFit:"cover",position:"absolute",top:0,left:0,opacity:e.opacity/100,transition:`opacity ${y}ms`}}))):(0,a.createElement)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"100%",background:"#f0f0f0"}},(0,r.__)("Bitte wählen Sie ein Basis-Bild","modular-blocks-plugin"))))))},save:({attributes:e})=>{const{baseImage:l,layers:t,title:n,description:i,height:r,showLabels:s,showDescriptions:c,allowMultipleVisible:u,transitionDuration:m,buttonStyle:d,buttonPosition:p}=e,g=o.useBlockProps.save(),b={layers:t,showLabels:s,showDescriptions:c,allowMultipleVisible:u,transitionDuration:m,buttonStyle:d,buttonPosition:p};return(0,a.createElement)("div",{...g,"data-overlay-config":JSON.stringify(b)},(0,a.createElement)("div",{className:`image-overlay-container button-position-${p}`},n&&(0,a.createElement)("h3",{className:"overlay-title"},n),i&&(0,a.createElement)("p",{className:"overlay-description"},i),(0,a.createElement)("div",{className:`layer-controls button-style-${d}`},t.map((e,l)=>(0,a.createElement)("button",{key:l,type:"button",className:"layer-toggle "+(e.visible?"active":""),"data-layer-index":l,style:{borderColor:e.color}},s&&(0,a.createElement)("span",{className:"layer-label"},e.label),c&&e.description&&(0,a.createElement)("span",{className:"layer-description"},e.description)))),(0,a.createElement)("div",{className:"overlay-image-container",style:{height:`${r}px`}},l.url&&(0,a.createElement)("img",{src:l.url,alt:l.alt,className:"base-image"}),t.map((e,l)=>e.image.url&&(0,a.createElement)("img",{key:l,src:e.image.url,alt:e.image.alt,className:`overlay-layer layer-${l} ${e.visible?"visible":""}`,"data-layer-index":l,style:{opacity:e.opacity/100}})))))}})})();