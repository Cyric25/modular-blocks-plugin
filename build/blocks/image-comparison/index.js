(()=>{"use strict";const e=window.React,t=window.wp.blocks,l=window.wp.blockEditor,a=window.wp.components,r=window.wp.i18n;(0,t.registerBlockType)("modular-blocks/image-comparison",{edit:({attributes:t,setAttributes:n})=>{const{beforeImage:o,afterImage:i,beforeLabel:s,afterLabel:c,orientation:m,startingPosition:d,showLabels:u,hoverAnimation:g,height:p}=t,b=(0,l.useBlockProps)();return(0,e.createElement)(e.Fragment,null,(0,e.createElement)(l.InspectorControls,null,(0,e.createElement)(a.PanelBody,{title:(0,r.__)("Bilder","modular-blocks-plugin")},(0,e.createElement)("div",{style:{marginBottom:"15px"}},(0,e.createElement)("strong",null,(0,r.__)("Vorher-Bild","modular-blocks-plugin")),(0,e.createElement)(l.MediaUploadCheck,null,(0,e.createElement)(l.MediaUpload,{onSelect:e=>{n({beforeImage:{url:e.url,alt:e.alt,id:e.id}})},allowedTypes:["image"],value:o.id,render:({open:t})=>(0,e.createElement)(a.Button,{onClick:t,variant:"secondary",style:{marginTop:"5px"}},o.url?(0,r.__)("Bild ändern","modular-blocks-plugin"):(0,r.__)("Bild auswählen","modular-blocks-plugin"))})),o.url&&(0,e.createElement)(e.Fragment,null,(0,e.createElement)("img",{src:o.url,alt:o.alt,style:{maxWidth:"100%",marginTop:"10px",borderRadius:"4px"}}),(0,e.createElement)(a.Button,{onClick:()=>{n({beforeImage:{url:"",alt:"",id:null}})},variant:"tertiary",isDestructive:!0,style:{marginTop:"5px"}},(0,r.__)("Entfernen","modular-blocks-plugin")))),(0,e.createElement)("div",{style:{marginBottom:"15px"}},(0,e.createElement)("strong",null,(0,r.__)("Nachher-Bild","modular-blocks-plugin")),(0,e.createElement)(l.MediaUploadCheck,null,(0,e.createElement)(l.MediaUpload,{onSelect:e=>{n({afterImage:{url:e.url,alt:e.alt,id:e.id}})},allowedTypes:["image"],value:i.id,render:({open:t})=>(0,e.createElement)(a.Button,{onClick:t,variant:"secondary",style:{marginTop:"5px"}},i.url?(0,r.__)("Bild ändern","modular-blocks-plugin"):(0,r.__)("Bild auswählen","modular-blocks-plugin"))})),i.url&&(0,e.createElement)(e.Fragment,null,(0,e.createElement)("img",{src:i.url,alt:i.alt,style:{maxWidth:"100%",marginTop:"10px",borderRadius:"4px"}}),(0,e.createElement)(a.Button,{onClick:()=>{n({afterImage:{url:"",alt:"",id:null}})},variant:"tertiary",isDestructive:!0,style:{marginTop:"5px"}},(0,r.__)("Entfernen","modular-blocks-plugin"))))),(0,e.createElement)(a.PanelBody,{title:(0,r.__)("Einstellungen","modular-blocks-plugin")},(0,e.createElement)(a.TextControl,{label:(0,r.__)("Vorher-Label","modular-blocks-plugin"),value:s,onChange:e=>n({beforeLabel:e})}),(0,e.createElement)(a.TextControl,{label:(0,r.__)("Nachher-Label","modular-blocks-plugin"),value:c,onChange:e=>n({afterLabel:e})}),(0,e.createElement)(a.SelectControl,{label:(0,r.__)("Orientierung","modular-blocks-plugin"),value:m,options:[{label:(0,r.__)("Horizontal","modular-blocks-plugin"),value:"horizontal"},{label:(0,r.__)("Vertikal","modular-blocks-plugin"),value:"vertical"}],onChange:e=>n({orientation:e})}),(0,e.createElement)(a.RangeControl,{label:(0,r.__)("Start-Position (%)","modular-blocks-plugin"),value:d,onChange:e=>n({startingPosition:e}),min:0,max:100}),(0,e.createElement)(a.RangeControl,{label:(0,r.__)("Höhe (px)","modular-blocks-plugin"),value:p,onChange:e=>n({height:e}),min:200,max:800}),(0,e.createElement)(a.ToggleControl,{label:(0,r.__)("Labels anzeigen","modular-blocks-plugin"),checked:u,onChange:e=>n({showLabels:e})}),(0,e.createElement)(a.ToggleControl,{label:(0,r.__)("Hover-Animation","modular-blocks-plugin"),checked:g,onChange:e=>n({hoverAnimation:e})}))),(0,e.createElement)("div",{...b},(0,e.createElement)("div",{className:"image-comparison-container"},(0,e.createElement)("div",{className:"comparison-preview",style:{height:`${p}px`,position:"relative",border:"1px solid #ddd"}},o.url&&i.url?(0,e.createElement)(e.Fragment,null,(0,e.createElement)("div",{style:{position:"relative",width:"100%",height:"100%"}},(0,e.createElement)("img",{src:i.url,alt:i.alt,style:{width:"100%",height:"100%",objectFit:"cover"}}),(0,e.createElement)("div",{style:{position:"absolute",top:0,left:0,width:`${d}%`,height:"100%",overflow:"hidden"}},(0,e.createElement)("img",{src:o.url,alt:o.alt,style:{width:"100%",height:"100%",objectFit:"cover"}})),(0,e.createElement)("div",{style:{position:"absolute",left:`${d}%`,top:0,bottom:0,width:"4px",backgroundColor:"white",cursor:"ew-resize",transform:"translateX(-50%)"}},(0,e.createElement)("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"40px",height:"40px",borderRadius:"50%",backgroundColor:"white",border:"2px solid #0073aa",display:"flex",alignItems:"center",justifyContent:"center"}},"⇄")),u&&(0,e.createElement)(e.Fragment,null,(0,e.createElement)("div",{style:{position:"absolute",top:"10px",left:"10px",padding:"5px 10px",backgroundColor:"rgba(0,0,0,0.7)",color:"white",borderRadius:"4px"}},s),(0,e.createElement)("div",{style:{position:"absolute",top:"10px",right:"10px",padding:"5px 10px",backgroundColor:"rgba(0,0,0,0.7)",color:"white",borderRadius:"4px"}},c)))):(0,e.createElement)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"100%",background:"#f0f0f0"}},(0,r.__)("Bitte wählen Sie ein Vorher- und ein Nachher-Bild","modular-blocks-plugin"))))))},save:({attributes:t})=>{const{beforeImage:a,afterImage:r,beforeLabel:n,afterLabel:o,orientation:i,startingPosition:s,showLabels:c,hoverAnimation:m,height:d}=t,u=l.useBlockProps.save(),g={orientation:i,startingPosition:s,showLabels:c,hoverAnimation:m,beforeLabel:n,afterLabel:o};return(0,e.createElement)("div",{...u,"data-comparison-config":JSON.stringify(g)},(0,e.createElement)("div",{className:`image-comparison-container orientation-${i}`},(0,e.createElement)("div",{className:"comparison-wrapper",style:{height:`${d}px`}},(0,e.createElement)("div",{className:"before-image-container"},a.url&&(0,e.createElement)("img",{src:a.url,alt:a.alt,className:"before-image"}),c&&(0,e.createElement)("div",{className:"image-label before-label"},n)),(0,e.createElement)("div",{className:"after-image-container"},r.url&&(0,e.createElement)("img",{src:r.url,alt:r.alt,className:"after-image"}),c&&(0,e.createElement)("div",{className:"image-label after-label"},o)),(0,e.createElement)("div",{className:"comparison-slider",style:{["horizontal"===i?"left":"top"]:`${s}%`}},(0,e.createElement)("div",{className:"slider-handle"},(0,e.createElement)("span",{className:"slider-icon"},"horizontal"===i?"⇄":"⇅"))))))}})})();