!function(){"use strict";function e(e,t){const n=e.querySelector(".image-comparison-container");if(!n)return;const o=e.querySelector(".before-image"),i=e.querySelector(".after-image");if(!o||!i)return;const s=document.createElement("img-comparison-slider");s.setAttribute("value",t.startingPosition),"vertical"===t.orientation&&s.setAttribute("direction","vertical");const r=document.createElement("img");r.slot="first",r.src=i.src,r.alt=i.alt,r.style.width="100%",r.style.display="block";const c=document.createElement("img");if(c.slot="second",c.src=o.src,c.alt=o.alt,c.style.width="100%",c.style.display="block",s.appendChild(r),s.appendChild(c),t.showLabels){const e=document.createElement("div");e.slot="first-overlay-end",e.className="jux-label",e.textContent=t.afterLabel;const n=document.createElement("div");n.slot="second-overlay-end",n.className="jux-label",n.textContent=t.beforeLabel,s.appendChild(e),s.appendChild(n)}n.innerHTML="",n.appendChild(s),console.log("Juxtaposition mode: Web Component initialized")}window.initImageComparison=function(t){if(!t)return;const n=t.getAttribute("data-comparison-config");if(!n)return;const o=JSON.parse(n),i=o.transitionMode||"slide";if("juxtaposition"===i)return console.log("Juxtaposition mode: Converting to img-comparison-slider Web Component"),void function(t,n){if(!window.customElements||!window.customElements.get("img-comparison-slider")){if(!document.querySelector('link[href*="img-comparison-slider"]')){const e=document.createElement("link");e.rel="stylesheet",e.href="https://cdn.jsdelivr.net/npm/img-comparison-slider@8/dist/styles.css",document.head.appendChild(e)}if(!document.querySelector('script[src*="img-comparison-slider"]')){const o=document.createElement("script");return o.defer=!0,o.src="https://cdn.jsdelivr.net/npm/img-comparison-slider@8/dist/index.js",document.head.appendChild(o),void(o.onload=function(){e(t,n)})}}e(t,n)}(t,o);const s=t.querySelector(".comparison-wrapper"),r=t.querySelector(".comparison-slider"),c=t.querySelector(".before-image"),a=t.querySelector(".after-image"),l=t.querySelector(".after-image-container"),d=t.querySelector(".slider-handle");if(!(s&&r&&c&&a&&l))return void console.error("Missing required elements");let m=!1,u=0,p=0,f=o.startingPosition;const y="horizontal"===o.orientation;function g(e){if(m=!0,r.classList.add("dragging"),e.type.startsWith("touch")){const t=e.touches[0];u=t.clientX,p=t.clientY}else u=e.clientX,p=e.clientY;f=parseFloat(r.style[y?"left":"top"])||o.startingPosition,e.preventDefault()}function h(){m=!1,r.classList.remove("dragging")}function v(e){if(!m)return;const t=s.getBoundingClientRect();let n,o,i;if(e.type.startsWith("touch")){const t=e.touches[0];n=t.clientX,o=t.clientY}else n=e.clientX,o=e.clientY;i=y?(n-u)/t.width*100:(o-p)/t.height*100;let r=f+i;r=Math.max(0,Math.min(100,r)),b(r)}function b(e){if(a&&l)if("fade"===i)r.style.setProperty("--progress",e+"%"),a.style.left="0%",a.style.top="0%",a.style.opacity=e/100;else if(y){r.style.left=e+"%";const t=e-100;a.style.left=t+"%",a.style.opacity=1}else{r.style.top=e+"%";const t=e-100;a.style.top=t+"%",a.style.opacity=1}}b(o.startingPosition),s.addEventListener("mousedown",g),document.addEventListener("mousemove",v),document.addEventListener("mouseup",h),s.addEventListener("touchstart",g),document.addEventListener("touchmove",v),document.addEventListener("touchend",h),r.setAttribute("tabindex","0"),r.addEventListener("keydown",function(e){let t=parseFloat(r.style[y?"left":"top"]),n=t;switch(e.key){case"ArrowLeft":case"ArrowUp":n=t-1,e.preventDefault();break;case"ArrowRight":case"ArrowDown":n=t+1,e.preventDefault();break;case"Home":n=0,e.preventDefault();break;case"End":n=100,e.preventDefault()}n=Math.max(0,Math.min(100,n)),b(n)}),o.hoverAnimation&&d&&d.classList.add("hover-animation")},document.addEventListener("DOMContentLoaded",function(){document.querySelectorAll(".wp-block-modular-blocks-image-comparison").forEach(e=>{window.initImageComparison(e)})})}();