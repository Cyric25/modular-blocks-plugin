(()=>{"use strict";var e={20:(e,t,n)=>{var l=n(609),o=Symbol.for("react.element"),a=(Symbol.for("react.fragment"),Object.prototype.hasOwnProperty),r=l.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,i={key:!0,ref:!0,__self:!0,__source:!0};t.jsx=function(e,t,n){var l,c={},s=null,m=null;for(l in void 0!==n&&(s=""+n),void 0!==t.key&&(s=""+t.key),void 0!==t.ref&&(m=t.ref),t)a.call(t,l)&&!i.hasOwnProperty(l)&&(c[l]=t[l]);if(e&&e.defaultProps)for(l in t=e.defaultProps)void 0===c[l]&&(c[l]=t[l]);return{$$typeof:o,type:e,key:s,ref:m,props:c,_owner:r.current}}},609:e=>{e.exports=window.React},848:(e,t,n)=>{e.exports=n(20)}},t={};function n(l){var o=t[l];if(void 0!==o)return o.exports;var a=t[l]={exports:{}};return e[l](a,a.exports,n),a.exports}var l=n(609);const o=window.wp.blocks,a=window.wp.blockEditor,r=window.wp.components,i=window.wp.i18n,c=window.wp.primitives;var s=n(848);const m=(0,s.jsx)(c.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,s.jsx)(c.Path,{fillRule:"evenodd",clipRule:"evenodd",d:"M12 5.5A2.25 2.25 0 0 0 9.878 7h4.244A2.251 2.251 0 0 0 12 5.5ZM12 4a3.751 3.751 0 0 0-3.675 3H5v1.5h1.27l.818 8.997a2.75 2.75 0 0 0 2.739 2.501h4.347a2.75 2.75 0 0 0 2.738-2.5L17.73 8.5H19V7h-3.325A3.751 3.751 0 0 0 12 4Zm4.224 4.5H7.776l.806 8.861a1.25 1.25 0 0 0 1.245 1.137h4.347a1.25 1.25 0 0 0 1.245-1.137l.805-8.861Z"})}),u=(0,s.jsx)(c.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,s.jsx)(c.Path,{d:"M11 12.5V17.5H12.5V12.5H17.5V11H12.5V6H11V11H6V12.5H11Z"})});(0,o.registerBlockType)("modular-blocks/statement-connector",{edit:({attributes:e,setAttributes:t})=>{const{title:n,description:o,leftColumn:c,rightColumn:s,connections:d,showFeedback:g,showRetry:p,showSolution:b,allowMultipleConnections:h,connectionStyle:C,lineWidth:E,animateConnections:_,instantFeedback:v,successText:k,partialSuccessText:x,failText:f}=e,y=(0,a.useBlockProps)(),w=(e,n,l)=>{const o=[...s.items];o[e]={...o[e],[n]:l},t({rightColumn:{...s,items:o}})};return(0,l.createElement)(l.Fragment,null,(0,l.createElement)(a.InspectorControls,null,(0,l.createElement)(r.PanelBody,{title:(0,i.__)("Einstellungen","modular-blocks-plugin")},(0,l.createElement)(r.ToggleControl,{label:(0,i.__)("Feedback anzeigen","modular-blocks-plugin"),checked:g,onChange:e=>t({showFeedback:e})}),(0,l.createElement)(r.ToggleControl,{label:(0,i.__)("Wiederholen erlauben","modular-blocks-plugin"),checked:p,onChange:e=>t({showRetry:e})}),(0,l.createElement)(r.ToggleControl,{label:(0,i.__)("Lösung anzeigen","modular-blocks-plugin"),checked:b,onChange:e=>t({showSolution:e})}),(0,l.createElement)(r.ToggleControl,{label:(0,i.__)("Mehrfachverbindungen erlauben","modular-blocks-plugin"),checked:h,onChange:e=>t({allowMultipleConnections:e})}),(0,l.createElement)(r.ToggleControl,{label:(0,i.__)("Sofortiges Feedback","modular-blocks-plugin"),checked:v,onChange:e=>t({instantFeedback:e})}),(0,l.createElement)(r.ToggleControl,{label:(0,i.__)("Verbindungen animieren","modular-blocks-plugin"),checked:_,onChange:e=>t({animateConnections:e})}),(0,l.createElement)(r.SelectControl,{label:(0,i.__)("Verbindungs-Stil","modular-blocks-plugin"),value:C,options:[{label:(0,i.__)("Linie","modular-blocks-plugin"),value:"line"},{label:(0,i.__)("Pfeil","modular-blocks-plugin"),value:"arrow"},{label:(0,i.__)("Kurve","modular-blocks-plugin"),value:"curve"}],onChange:e=>t({connectionStyle:e})}),(0,l.createElement)(r.RangeControl,{label:(0,i.__)("Linienbreite","modular-blocks-plugin"),value:E,onChange:e=>t({lineWidth:e}),min:1,max:10})),(0,l.createElement)(r.PanelBody,{title:(0,i.__)("Texte","modular-blocks-plugin"),initialOpen:!1},(0,l.createElement)(r.TextControl,{label:(0,i.__)("Erfolgs-Text","modular-blocks-plugin"),value:k,onChange:e=>t({successText:e})}),(0,l.createElement)(r.TextControl,{label:(0,i.__)("Teil-Erfolg Text","modular-blocks-plugin"),value:x,onChange:e=>t({partialSuccessText:e})}),(0,l.createElement)(r.TextControl,{label:(0,i.__)("Fehlschlag-Text","modular-blocks-plugin"),value:f,onChange:e=>t({failText:e})}))),(0,l.createElement)("div",{...y},(0,l.createElement)("div",{className:"statement-connector-container"},(0,l.createElement)("div",{className:"connector-header"},(0,l.createElement)(r.TextControl,{label:(0,i.__)("Titel","modular-blocks-plugin"),value:n,onChange:e=>t({title:e})}),(0,l.createElement)(r.TextControl,{label:(0,i.__)("Beschreibung","modular-blocks-plugin"),value:o,onChange:e=>t({description:e})})),(0,l.createElement)("div",{className:"columns-editor",style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"20px"}},(0,l.createElement)("div",null,(0,l.createElement)(r.TextControl,{label:(0,i.__)("Titel linke Spalte","modular-blocks-plugin"),value:c.title,onChange:e=>t({leftColumn:{...c,title:e}})}),c.items.map((e,n)=>(0,l.createElement)(r.Card,{key:n,style:{marginBottom:"10px"}},(0,l.createElement)(r.CardHeader,null,(0,l.createElement)("div",{style:{display:"flex",justifyContent:"space-between",width:"100%"}},(0,l.createElement)("strong",null,e.text||`Item ${n+1}`),(0,l.createElement)(r.Button,{onClick:()=>(e=>{if(c.items.length<=1)return;const n=c.items.filter((t,n)=>n!==e);t({leftColumn:{...c,items:n}})})(n),icon:m,variant:"tertiary",size:"small",isDestructive:!0}))),(0,l.createElement)(r.CardBody,null,(0,l.createElement)(r.TextControl,{label:(0,i.__)("Text","modular-blocks-plugin"),value:e.text,onChange:e=>((e,n,l)=>{const o=[...c.items];o[e]={...o[e],[n]:l},t({leftColumn:{...c,items:o}})})(n,"text",e)})))),(0,l.createElement)(r.Button,{onClick:()=>{const e=[...c.items,{id:`item${Date.now()}`,text:`Begriff ${c.items.length+1}`,color:"#0073aa"}];t({leftColumn:{...c,items:e}})},icon:u,variant:"secondary",size:"small"},(0,i.__)("Item hinzufügen","modular-blocks-plugin"))),(0,l.createElement)("div",null,(0,l.createElement)(r.TextControl,{label:(0,i.__)("Titel rechte Spalte","modular-blocks-plugin"),value:s.title,onChange:e=>t({rightColumn:{...s,title:e}})}),s.items.map((e,n)=>(0,l.createElement)(r.Card,{key:n,style:{marginBottom:"10px"}},(0,l.createElement)(r.CardHeader,null,(0,l.createElement)("div",{style:{display:"flex",justifyContent:"space-between",width:"100%"}},(0,l.createElement)("strong",null,e.text||`Item ${n+1}`),(0,l.createElement)(r.Button,{onClick:()=>(e=>{if(s.items.length<=1)return;const n=s.items.filter((t,n)=>n!==e);t({rightColumn:{...s,items:n}})})(n),icon:m,variant:"tertiary",size:"small",isDestructive:!0}))),(0,l.createElement)(r.CardBody,null,(0,l.createElement)(r.TextControl,{label:(0,i.__)("Text","modular-blocks-plugin"),value:e.text,onChange:e=>w(n,"text",e)}),(0,l.createElement)(r.SelectControl,{label:(0,i.__)("Korrekte Verbindung","modular-blocks-plugin"),value:e.correctConnection,options:[{label:(0,i.__)("-- Auswählen --","modular-blocks-plugin"),value:""},...c.items.map(e=>({label:e.text,value:e.id}))],onChange:e=>w(n,"correctConnection",e)})))),(0,l.createElement)(r.Button,{onClick:()=>{const e=[...s.items,{id:`def${Date.now()}`,text:`Definition ${s.items.length+1}`,color:"#0073aa",correctConnection:""}];t({rightColumn:{...s,items:e}})},icon:u,variant:"secondary",size:"small"},(0,i.__)("Item hinzufügen","modular-blocks-plugin")))),(0,l.createElement)("div",{style:{marginTop:"15px",padding:"10px",backgroundColor:"#f0f6fc",borderLeft:"4px solid #0073aa",fontSize:"12px"}},(0,i.__)("Vorschau: Verbindungen funktionieren im Frontend. Konfigurieren Sie die korrekten Zuordnungen oben.","modular-blocks-plugin")))))},save:({attributes:e})=>{const{title:t,description:n,leftColumn:o,rightColumn:r,connections:c,showFeedback:s,showRetry:m,showSolution:u,allowMultipleConnections:d,connectionStyle:g,lineWidth:p,animateConnections:b,instantFeedback:h,successText:C,partialSuccessText:E,failText:_}=e,v=a.useBlockProps.save(),k={leftColumn:o,rightColumn:r,connections:c,showFeedback:s,showRetry:m,showSolution:u,allowMultipleConnections:d,connectionStyle:g,lineWidth:p,animateConnections:b,instantFeedback:h,successText:C,partialSuccessText:E,failText:_};return(0,l.createElement)("div",{...v,"data-connector-config":JSON.stringify(k)},(0,l.createElement)("div",{className:"statement-connector-container"},t&&(0,l.createElement)("h3",{className:"connector-title"},t),n&&(0,l.createElement)("p",{className:"connector-description"},n),(0,l.createElement)("div",{className:"connector-area"},(0,l.createElement)("div",{className:"left-column"},(0,l.createElement)("h4",null,o.title),(0,l.createElement)("div",{className:"items-list"},o.items.map((e,t)=>(0,l.createElement)("div",{key:e.id,className:"connector-item left-item","data-item-id":e.id,style:{borderColor:e.color}},(0,l.createElement)("span",{className:"item-text"},e.text),(0,l.createElement)("div",{className:"connector-point",style:{backgroundColor:e.color}}))))),(0,l.createElement)("svg",{className:"connections-canvas",style:{width:"100%",height:"100%",position:"absolute",pointerEvents:"none"}}),(0,l.createElement)("div",{className:"right-column"},(0,l.createElement)("h4",null,r.title),(0,l.createElement)("div",{className:"items-list"},r.items.map((e,t)=>(0,l.createElement)("div",{key:e.id,className:"connector-item right-item","data-item-id":e.id,style:{borderColor:e.color}},(0,l.createElement)("div",{className:"connector-point",style:{backgroundColor:e.color}}),(0,l.createElement)("span",{className:"item-text"},e.text)))))),(0,l.createElement)("div",{className:"connector-controls"},(0,l.createElement)("button",{type:"button",className:"connector-button connector-check"},(0,i.__)("Prüfen","modular-blocks-plugin")),m&&(0,l.createElement)("button",{type:"button",className:"connector-button connector-retry",style:{display:"none"}},(0,i.__)("Wiederholen","modular-blocks-plugin")),u&&(0,l.createElement)("button",{type:"button",className:"connector-button connector-solution",style:{display:"none"}},(0,i.__)("Lösung anzeigen","modular-blocks-plugin"))),(0,l.createElement)("div",{className:"connector-results",style:{display:"none"}},(0,l.createElement)("div",{className:"result-message"}))))}})})();