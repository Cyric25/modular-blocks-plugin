(()=>{"use strict";var e={20:(e,t,l)=>{var r=l(609),n=Symbol.for("react.element"),o=(Symbol.for("react.fragment"),Object.prototype.hasOwnProperty),a=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};t.jsx=function(e,t,l){var r,c={},i=null,d=null;for(r in void 0!==l&&(i=""+l),void 0!==t.key&&(i=""+t.key),void 0!==t.ref&&(d=t.ref),t)o.call(t,r)&&!s.hasOwnProperty(r)&&(c[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===c[r]&&(c[r]=t[r]);return{$$typeof:n,type:e,key:i,ref:d,props:c,_owner:a.current}}},609:e=>{e.exports=window.React},848:(e,t,l)=>{e.exports=l(20)}},t={};function l(r){var n=t[r];if(void 0!==n)return n.exports;var o=t[r]={exports:{}};return e[r](o,o.exports,l),o.exports}var r=l(609);const n=window.wp.blocks,o=window.wp.blockEditor,a=window.wp.components,s=window.wp.i18n,c=window.wp.primitives;var i=l(848);const d=(0,i.jsx)(c.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,i.jsx)(c.Path,{d:"M11 12.5V17.5H12.5V12.5H17.5V11H12.5V6H11V11H6V12.5H11Z"})}),u=(0,i.jsx)(c.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,i.jsx)(c.Path,{fillRule:"evenodd",clipRule:"evenodd",d:"M12 5.5A2.25 2.25 0 0 0 9.878 7h4.244A2.251 2.251 0 0 0 12 5.5ZM12 4a3.751 3.751 0 0 0-3.675 3H5v1.5h1.27l.818 8.997a2.75 2.75 0 0 0 2.739 2.501h4.347a2.75 2.75 0 0 0 2.738-2.5L17.73 8.5H19V7h-3.325A3.751 3.751 0 0 0 12 4Zm4.224 4.5H7.776l.806 8.861a1.25 1.25 0 0 0 1.245 1.137h4.347a1.25 1.25 0 0 0 1.245-1.137l.805-8.861Z"})});(0,n.registerBlockType)("modular-blocks/drag-the-words",{edit:({attributes:e,setAttributes:t})=>{const{title:l,description:n,textWithBlanks:c,wordBank:i,showFeedback:m,showRetry:g,showSolution:p,instantFeedback:k,enableWordReuse:b,showScore:h,randomizeWords:w,highlightCorrectOnDrop:_,caseSensitive:x,scoreText:E,successText:C,partialSuccessText:v,failText:y}=e,f=(0,o.useBlockProps)(),T=(e,l,r)=>{const n=[...i];n[e]={...n[e],[l]:r},t({wordBank:n})},S=()=>{const e=c.match(/\*([^*]+)\*/g);return e?e.map(e=>e.replace(/\*/g,"")):[]},B=S();return(0,r.createElement)(r.Fragment,null,(0,r.createElement)(o.InspectorControls,null,(0,r.createElement)(a.PanelBody,{title:(0,s.__)("Einstellungen","modular-blocks-plugin")},(0,r.createElement)(a.ToggleControl,{label:(0,s.__)("Feedback anzeigen","modular-blocks-plugin"),checked:m,onChange:e=>t({showFeedback:e})}),(0,r.createElement)(a.ToggleControl,{label:(0,s.__)("Wiederholen erlauben","modular-blocks-plugin"),checked:g,onChange:e=>t({showRetry:e})}),(0,r.createElement)(a.ToggleControl,{label:(0,s.__)("Lösung anzeigen","modular-blocks-plugin"),checked:p,onChange:e=>t({showSolution:e})}),(0,r.createElement)(a.ToggleControl,{label:(0,s.__)("Sofortiges Feedback","modular-blocks-plugin"),checked:k,onChange:e=>t({instantFeedback:e})}),(0,r.createElement)(a.ToggleControl,{label:(0,s.__)("Wörter wiederverwenden","modular-blocks-plugin"),checked:b,onChange:e=>t({enableWordReuse:e})}),(0,r.createElement)(a.ToggleControl,{label:(0,s.__)("Punktzahl anzeigen","modular-blocks-plugin"),checked:h,onChange:e=>t({showScore:e})}),(0,r.createElement)(a.ToggleControl,{label:(0,s.__)("Wörter zufällig anordnen","modular-blocks-plugin"),checked:w,onChange:e=>t({randomizeWords:e})}),(0,r.createElement)(a.ToggleControl,{label:(0,s.__)("Korrekte markieren beim Ablegen","modular-blocks-plugin"),checked:_,onChange:e=>t({highlightCorrectOnDrop:e})}),(0,r.createElement)(a.ToggleControl,{label:(0,s.__)("Groß-/Kleinschreibung beachten","modular-blocks-plugin"),checked:x,onChange:e=>t({caseSensitive:e})})),(0,r.createElement)(a.PanelBody,{title:(0,s.__)("Texte","modular-blocks-plugin"),initialOpen:!1},(0,r.createElement)(a.TextControl,{label:(0,s.__)("Erfolgs-Text","modular-blocks-plugin"),value:C,onChange:e=>t({successText:e})}),(0,r.createElement)(a.TextControl,{label:(0,s.__)("Teil-Erfolg Text","modular-blocks-plugin"),value:v,onChange:e=>t({partialSuccessText:e})}),(0,r.createElement)(a.TextControl,{label:(0,s.__)("Fehlschlag-Text","modular-blocks-plugin"),value:y,onChange:e=>t({failText:e})}))),(0,r.createElement)("div",{...f},(0,r.createElement)("div",{className:"drag-the-words-container"},(0,r.createElement)(a.TextControl,{label:(0,s.__)("Titel","modular-blocks-plugin"),value:l,onChange:e=>t({title:e})}),(0,r.createElement)(a.TextControl,{label:(0,s.__)("Beschreibung","modular-blocks-plugin"),value:n,onChange:e=>t({description:e})}),(0,r.createElement)("div",{style:{marginTop:"15px"}},(0,r.createElement)(a.TextareaControl,{label:(0,s.__)("Text mit Lücken","modular-blocks-plugin"),value:c,onChange:e=>t({textWithBlanks:e}),help:(0,s.__)("Verwenden Sie *Wort* um Lücken zu markieren. Beispiel: Die *Sonne* scheint hell.","modular-blocks-plugin"),rows:5})),B.length>0&&(0,r.createElement)("div",{style:{padding:"10px",background:"#f0f6fc",borderRadius:"4px",marginTop:"10px"}},(0,r.createElement)("strong",null,(0,s.__)("Gefundene Lücken:","modular-blocks-plugin")),(0,r.createElement)("div",{style:{marginTop:"5px"}},B.map((e,t)=>(0,r.createElement)("span",{key:t,style:{display:"inline-block",margin:"2px",padding:"2px 6px",background:"#0073aa",color:"white",borderRadius:"3px",fontSize:"12px"}},t,": ",e)))),(0,r.createElement)("div",{style:{marginTop:"20px"}},(0,r.createElement)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"10px"}},(0,r.createElement)("h4",{style:{margin:0}},(0,s.__)("Wortbank","modular-blocks-plugin")),(0,r.createElement)("div",{style:{display:"flex",gap:"8px"}},(0,r.createElement)(a.Button,{onClick:()=>{const e=S(),l=[];e.forEach((e,t)=>{const r=i.find(t=>t.word===e&&t.isCorrect);r?(r.blanks.includes(t)||r.blanks.push(t),l.push(r)):l.push({word:e,isCorrect:!0,blanks:[t]})});const r=i.filter(e=>!e.isCorrect);t({wordBank:[...l,...r]})},variant:"secondary",size:"small"},(0,s.__)("Aus Lücken generieren","modular-blocks-plugin")),(0,r.createElement)(a.Button,{onClick:()=>{const e=[...i,{word:`Distraktor${i.filter(e=>!e.isCorrect).length+1}`,isCorrect:!1,blanks:[]}];t({wordBank:e})},icon:d,variant:"secondary",size:"small"},(0,s.__)("Distraktor hinzufügen","modular-blocks-plugin")))),i.map((e,l)=>(0,r.createElement)(a.Card,{key:l,style:{marginBottom:"10px"}},(0,r.createElement)(a.CardHeader,null,(0,r.createElement)("div",{style:{display:"flex",alignItems:"center",gap:"10px",width:"100%"}},(0,r.createElement)("input",{type:"checkbox",checked:e.isCorrect,onChange:()=>T(l,"isCorrect",!e.isCorrect)}),(0,r.createElement)("span",{style:{fontWeight:e.isCorrect?"bold":"normal",flex:1}},e.isCorrect?(0,s.__)("Korrekt","modular-blocks-plugin"):(0,s.__)("Distraktor","modular-blocks-plugin")),(0,r.createElement)(a.Button,{onClick:()=>(e=>{if(i.length<=1)return;const l=i.filter((t,l)=>l!==e);t({wordBank:l})})(l),icon:u,variant:"tertiary",size:"small",isDestructive:!0}))),(0,r.createElement)(a.CardBody,null,(0,r.createElement)(a.TextControl,{label:(0,s.__)("Wort","modular-blocks-plugin"),value:e.word,onChange:e=>T(l,"word",e)}),e.isCorrect&&(0,r.createElement)(a.TextControl,{label:(0,s.__)("Passende Lücken (Komma-getrennt)","modular-blocks-plugin"),value:e.blanks.join(", "),onChange:e=>T(l,"blanks",e.split(",").map(e=>parseInt(e.trim())).filter(e=>!isNaN(e))),help:(0,s.__)("Nummern der Lücken (0, 1, 2, ...)","modular-blocks-plugin")}))))),(0,r.createElement)("div",{style:{marginTop:"15px",padding:"10px",backgroundColor:"#f0f6fc",borderLeft:"4px solid #0073aa",fontSize:"12px"}},(0,s.__)("Vorschau: Die Drag-the-Words Aktivität funktioniert im Frontend.","modular-blocks-plugin")))))},save:({attributes:e})=>{const{title:t,description:l,textWithBlanks:n,wordBank:a,showFeedback:c,showRetry:i,showSolution:d,instantFeedback:u,enableWordReuse:m,showScore:g,randomizeWords:p,highlightCorrectOnDrop:k,caseSensitive:b,scoreText:h,successText:w,partialSuccessText:_,failText:x}=e,E=o.useBlockProps.save();let C=0;const v=n.replace(/\*([^*]+)\*/g,()=>{const e=`<span class="word-blank" data-blank="${C}"></span>`;return C++,e}),y={textWithBlanks:n,wordBank:a,showFeedback:c,showRetry:i,showSolution:d,instantFeedback:u,enableWordReuse:m,showScore:g,randomizeWords:p,highlightCorrectOnDrop:k,caseSensitive:b,scoreText:h,successText:w,partialSuccessText:_,failText:x};return(0,r.createElement)("div",{...E,"data-drag-words-config":JSON.stringify(y)},(0,r.createElement)("div",{className:"drag-the-words-container"},t&&(0,r.createElement)("h3",{className:"drag-words-title"},t),l&&(0,r.createElement)("p",{className:"drag-words-description"},l),(0,r.createElement)("div",{className:"text-area"},(0,r.createElement)("div",{className:"text-content",dangerouslySetInnerHTML:{__html:v}})),(0,r.createElement)("div",{className:"word-bank"},(0,r.createElement)("h4",null,(0,s.__)("Wortbank","modular-blocks-plugin")),(0,r.createElement)("div",{className:"word-bank-items"},a.map((e,t)=>(0,r.createElement)("div",{key:t,className:"draggable-word","data-word":e.word,"data-is-correct":e.isCorrect,draggable:"true"},e.word)))),(0,r.createElement)("div",{className:"drag-words-controls"},(0,r.createElement)("button",{type:"button",className:"drag-words-button drag-words-check"},(0,s.__)("Prüfen","modular-blocks-plugin")),i&&(0,r.createElement)("button",{type:"button",className:"drag-words-button drag-words-retry",style:{display:"none"}},(0,s.__)("Wiederholen","modular-blocks-plugin")),d&&(0,r.createElement)("button",{type:"button",className:"drag-words-button drag-words-solution",style:{display:"none"}},(0,s.__)("Lösung anzeigen","modular-blocks-plugin"))),g&&(0,r.createElement)("div",{className:"drag-words-results",style:{display:"none"}},(0,r.createElement)("div",{className:"result-message"}),(0,r.createElement)("div",{className:"score-display"}))))}})})();