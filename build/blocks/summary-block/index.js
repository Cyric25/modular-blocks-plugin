(()=>{"use strict";var e={20:(e,t,l)=>{var n=l(609),a=Symbol.for("react.element"),r=(Symbol.for("react.fragment"),Object.prototype.hasOwnProperty),o=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};t.jsx=function(e,t,l){var n,c={},i=null,u=null;for(n in void 0!==l&&(i=""+l),void 0!==t.key&&(i=""+t.key),void 0!==t.ref&&(u=t.ref),t)r.call(t,n)&&!s.hasOwnProperty(n)&&(c[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps)void 0===c[n]&&(c[n]=t[n]);return{$$typeof:a,type:e,key:i,ref:u,props:c,_owner:o.current}}},609:e=>{e.exports=window.React},848:(e,t,l)=>{e.exports=l(20)}},t={};function l(n){var a=t[n];if(void 0!==a)return a.exports;var r=t[n]={exports:{}};return e[n](r,r.exports,l),r.exports}var n=l(609);const a=window.wp.blocks,r=window.wp.blockEditor,o=window.wp.components,s=window.wp.i18n,c=window.wp.primitives;var i=l(848);const u=(0,i.jsx)(c.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,i.jsx)(c.Path,{fillRule:"evenodd",clipRule:"evenodd",d:"M12 5.5A2.25 2.25 0 0 0 9.878 7h4.244A2.251 2.251 0 0 0 12 5.5ZM12 4a3.751 3.751 0 0 0-3.675 3H5v1.5h1.27l.818 8.997a2.75 2.75 0 0 0 2.739 2.501h4.347a2.75 2.75 0 0 0 2.738-2.5L17.73 8.5H19V7h-3.325A3.751 3.751 0 0 0 12 4Zm4.224 4.5H7.776l.806 8.861a1.25 1.25 0 0 0 1.245 1.137h4.347a1.25 1.25 0 0 0 1.245-1.137l.805-8.861Z"})}),m=(0,i.jsx)(c.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,i.jsx)(c.Path,{d:"M11 12.5V17.5H12.5V12.5H17.5V11H12.5V6H11V11H6V12.5H11Z"})});(0,a.registerBlockType)("modular-blocks/summary-block",{edit:({attributes:e,setAttributes:t})=>{const{title:l,description:a,statements:c,requiredSelections:i,showFeedback:d,showRetry:g,showSolution:p,allowReordering:b,scoreForSelection:h,scoreForOrder:_,passPercentage:x,instructionText:k,orderText:E,successText:y,partialSuccessText:v,failText:w}=e,C=(0,r.useBlockProps)(),T=(e,l,n)=>{const a=[...c];a[e]={...a[e],[l]:n},t({statements:a})},f=c.filter(e=>e.isCorrect);return(0,n.createElement)(n.Fragment,null,(0,n.createElement)(r.InspectorControls,null,(0,n.createElement)(o.PanelBody,{title:(0,s.__)("Einstellungen","modular-blocks-plugin")},(0,n.createElement)(o.RangeControl,{label:(0,s.__)("Anzahl auszuwählender Aussagen","modular-blocks-plugin"),value:i,onChange:e=>t({requiredSelections:e}),min:1,max:10}),(0,n.createElement)(o.ToggleControl,{label:(0,s.__)("Feedback anzeigen","modular-blocks-plugin"),checked:d,onChange:e=>t({showFeedback:e})}),(0,n.createElement)(o.ToggleControl,{label:(0,s.__)("Wiederholen erlauben","modular-blocks-plugin"),checked:g,onChange:e=>t({showRetry:e})}),(0,n.createElement)(o.ToggleControl,{label:(0,s.__)("Lösung anzeigen","modular-blocks-plugin"),checked:p,onChange:e=>t({showSolution:e})}),(0,n.createElement)(o.ToggleControl,{label:(0,s.__)("Neuordnung erlauben","modular-blocks-plugin"),checked:b,onChange:e=>t({allowReordering:e})}),(0,n.createElement)(o.RangeControl,{label:(0,s.__)("Bestehen-Schwelle (%)","modular-blocks-plugin"),value:x,onChange:e=>t({passPercentage:e}),min:0,max:100,step:5})),(0,n.createElement)(o.PanelBody,{title:(0,s.__)("Texte","modular-blocks-plugin"),initialOpen:!1},(0,n.createElement)(o.TextControl,{label:(0,s.__)("Erfolgs-Text","modular-blocks-plugin"),value:y,onChange:e=>t({successText:e})}),(0,n.createElement)(o.TextControl,{label:(0,s.__)("Teil-Erfolg Text","modular-blocks-plugin"),value:v,onChange:e=>t({partialSuccessText:e})}),(0,n.createElement)(o.TextControl,{label:(0,s.__)("Fehlschlag-Text","modular-blocks-plugin"),value:w,onChange:e=>t({failText:e})}))),(0,n.createElement)("div",{...C},(0,n.createElement)("div",{className:"summary-block-container"},(0,n.createElement)("div",{className:"summary-header"},(0,n.createElement)(o.TextControl,{label:(0,s.__)("Titel","modular-blocks-plugin"),value:l,onChange:e=>t({title:e})}),(0,n.createElement)(o.TextControl,{label:(0,s.__)("Beschreibung","modular-blocks-plugin"),value:a,onChange:e=>t({description:e})})),(0,n.createElement)("div",{className:"statements-section"},(0,n.createElement)("h4",null,(0,s.__)("Aussagen","modular-blocks-plugin")),c.map((e,l)=>(0,n.createElement)(o.Card,{key:l,style:{marginBottom:"10px"}},(0,n.createElement)(o.CardHeader,null,(0,n.createElement)("div",{style:{display:"flex",alignItems:"center",gap:"10px",width:"100%"}},(0,n.createElement)("input",{type:"checkbox",checked:e.isCorrect,onChange:()=>T(l,"isCorrect",!e.isCorrect)}),(0,n.createElement)("span",{style:{fontWeight:e.isCorrect?"bold":"normal",flex:1}},e.isCorrect?(0,s.__)("Richtig","modular-blocks-plugin"):(0,s.__)("Falsch/Distraktor","modular-blocks-plugin")),c.length>2&&(0,n.createElement)(o.Button,{onClick:()=>(e=>{if(c.length<=2)return;const l=c.filter((t,l)=>l!==e);t({statements:l})})(l),icon:u,variant:"tertiary",size:"small",isDestructive:!0}))),(0,n.createElement)(o.CardBody,null,(0,n.createElement)(o.TextControl,{label:(0,s.__)("Text","modular-blocks-plugin"),value:e.text,onChange:e=>T(l,"text",e)}),e.isCorrect&&(0,n.createElement)(o.RangeControl,{label:(0,s.__)("Korrekte Position","modular-blocks-plugin"),value:e.correctPosition,onChange:e=>T(l,"correctPosition",e),min:1,max:i}),d&&(0,n.createElement)(o.TextControl,{label:(0,s.__)("Feedback","modular-blocks-plugin"),value:e.feedback,onChange:e=>T(l,"feedback",e)})))),(0,n.createElement)(o.Button,{onClick:()=>{const e=[...c,{text:`Neue Aussage ${c.length+1}`,isCorrect:!1,correctPosition:0,feedback:""}];t({statements:e})},icon:m,variant:"secondary"},(0,s.__)("Aussage hinzufügen","modular-blocks-plugin"))),(0,n.createElement)("div",{className:"summary-status",style:{padding:"15px",backgroundColor:f.length>=i?"#d7eddb":"#fcf2cd",border:"1px solid "+(f.length>=i?"#00a32a":"#dba617"),borderRadius:"4px",marginTop:"20px"}},(0,n.createElement)("strong",null,f.length>=i?(0,s.__)("Bereit!","modular-blocks-plugin"):(0,s.__)("Markieren Sie mindestens "+i+" richtige Aussagen","modular-blocks-plugin")),(0,n.createElement)("div",{style:{fontSize:"13px",marginTop:"5px"}},(0,s.__)(`${f.length} richtige Aussagen von ${c.length}`,"modular-blocks-plugin"))))))},save:({attributes:e})=>{const{title:t,description:l,statements:a,requiredSelections:o,showFeedback:c,showRetry:i,showSolution:u,allowReordering:m,scoreForSelection:d,scoreForOrder:g,passPercentage:p,instructionText:b,orderText:h,successText:_,partialSuccessText:x,failText:k}=e,E=r.useBlockProps.save(),y={statements:a,requiredSelections:o,showFeedback:c,showRetry:i,showSolution:u,allowReordering:m,scoreForSelection:d,scoreForOrder:g,passPercentage:p,instructionText:b,orderText:h,successText:_,partialSuccessText:x,failText:k};return(0,n.createElement)("div",{...E,"data-summary-config":JSON.stringify(y)},(0,n.createElement)("div",{className:"summary-block-container"},t&&(0,n.createElement)("h3",{className:"summary-title"},t),l&&(0,n.createElement)("p",{className:"summary-description"},l),(0,n.createElement)("div",{className:"instruction-text"},(0,n.createElement)("p",null,b.replace("@count",o))),(0,n.createElement)("div",{className:"statements-list"},a.map((e,t)=>(0,n.createElement)("div",{key:t,className:"statement-item","data-statement-index":t},(0,n.createElement)("button",{type:"button",className:"statement-button"},e.text)))),(0,n.createElement)("div",{className:"selected-area",style:{display:"none"}},(0,n.createElement)("h4",null,h),(0,n.createElement)("div",{className:"selected-statements"})),(0,n.createElement)("div",{className:"summary-controls"},(0,n.createElement)("button",{type:"button",className:"summary-button summary-check",disabled:!0},(0,s.__)("Prüfen","modular-blocks-plugin")),i&&(0,n.createElement)("button",{type:"button",className:"summary-button summary-retry",style:{display:"none"}},(0,s.__)("Wiederholen","modular-blocks-plugin")),u&&(0,n.createElement)("button",{type:"button",className:"summary-button summary-solution",style:{display:"none"}},(0,s.__)("Lösung anzeigen","modular-blocks-plugin"))),(0,n.createElement)("div",{className:"summary-results",style:{display:"none"}},(0,n.createElement)("div",{className:"result-message"}))))}})})();