(()=>{"use strict";var e={20:(e,t,l)=>{var o=l(609),n=Symbol.for("react.element"),a=(Symbol.for("react.fragment"),Object.prototype.hasOwnProperty),r=o.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,i={key:!0,ref:!0,__self:!0,__source:!0};t.jsx=function(e,t,l){var o,s={},c=null,u=null;for(o in void 0!==l&&(c=""+l),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(u=t.ref),t)a.call(t,o)&&!i.hasOwnProperty(o)&&(s[o]=t[o]);if(e&&e.defaultProps)for(o in t=e.defaultProps)void 0===s[o]&&(s[o]=t[o]);return{$$typeof:n,type:e,key:c,ref:u,props:s,_owner:r.current}}},609:e=>{e.exports=window.React},848:(e,t,l)=>{e.exports=l(20)}},t={};function l(o){var n=t[o];if(void 0!==n)return n.exports;var a=t[o]={exports:{}};return e[o](a,a.exports,l),a.exports}var o=l(609);const n=window.wp.blocks,a=window.wp.blockEditor,r=window.wp.components,i=window.wp.i18n,s=window.wp.primitives;var c=l(848);const u=(0,c.jsx)(s.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,c.jsx)(s.Path,{fillRule:"evenodd",clipRule:"evenodd",d:"M12 5.5A2.25 2.25 0 0 0 9.878 7h4.244A2.251 2.251 0 0 0 12 5.5ZM12 4a3.751 3.751 0 0 0-3.675 3H5v1.5h1.27l.818 8.997a2.75 2.75 0 0 0 2.739 2.501h4.347a2.75 2.75 0 0 0 2.738-2.5L17.73 8.5H19V7h-3.325A3.751 3.751 0 0 0 12 4Zm4.224 4.5H7.776l.806 8.861a1.25 1.25 0 0 0 1.245 1.137h4.347a1.25 1.25 0 0 0 1.245-1.137l.805-8.861Z"})}),p=(0,c.jsx)(s.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,c.jsx)(s.Path,{d:"M11 12.5V17.5H12.5V12.5H17.5V11H12.5V6H11V11H6V12.5H11Z"})});(0,n.registerBlockType)("modular-blocks/point-of-interest",{edit:({attributes:e,setAttributes:t})=>{const{backgroundImage:l,title:n,description:s,hotspots:c,hotspotStyle:m,popupStyle:d,popupPosition:g,showNumbers:h,autoClose:b,closeOnOutsideClick:_,height:v,enableZoom:k,zoomLevel:E}=e,y=(0,a.useBlockProps)(),C=(e,l,o)=>{const n=[...c];n[e]={...n[e],[l]:o},t({hotspots:n})};return(0,o.createElement)(o.Fragment,null,(0,o.createElement)(a.InspectorControls,null,(0,o.createElement)(r.PanelBody,{title:(0,i.__)("Hintergrundbild","modular-blocks-plugin")},(0,o.createElement)(a.MediaUploadCheck,null,(0,o.createElement)(a.MediaUpload,{onSelect:e=>{t({backgroundImage:{url:e.url,alt:e.alt,id:e.id}})},allowedTypes:["image"],value:l.id,render:({open:e})=>(0,o.createElement)(r.Button,{onClick:e,variant:"secondary"},l.url?(0,i.__)("Bild ändern","modular-blocks-plugin"):(0,i.__)("Bild auswählen","modular-blocks-plugin"))})),l.url&&(0,o.createElement)(r.Button,{onClick:()=>{t({backgroundImage:{url:"",alt:"",id:null}})},variant:"tertiary",isDestructive:!0,style:{marginTop:"10px"}},(0,i.__)("Bild entfernen","modular-blocks-plugin"))),(0,o.createElement)(r.PanelBody,{title:(0,i.__)("Einstellungen","modular-blocks-plugin")},(0,o.createElement)(r.TextControl,{label:(0,i.__)("Titel","modular-blocks-plugin"),value:n,onChange:e=>t({title:e})}),(0,o.createElement)(r.TextControl,{label:(0,i.__)("Beschreibung","modular-blocks-plugin"),value:s,onChange:e=>t({description:e})}),(0,o.createElement)(r.RangeControl,{label:(0,i.__)("Höhe (px)","modular-blocks-plugin"),value:v,onChange:e=>t({height:e}),min:200,max:800}),(0,o.createElement)(r.SelectControl,{label:(0,i.__)("Hotspot-Stil","modular-blocks-plugin"),value:m,options:[{label:(0,i.__)("Kreis","modular-blocks-plugin"),value:"circle"},{label:(0,i.__)("Quadrat","modular-blocks-plugin"),value:"square"},{label:(0,i.__)("Pin","modular-blocks-plugin"),value:"pin"}],onChange:e=>t({hotspotStyle:e})}),(0,o.createElement)(r.SelectControl,{label:(0,i.__)("Popup-Stil","modular-blocks-plugin"),value:d,options:[{label:(0,i.__)("Tooltip","modular-blocks-plugin"),value:"tooltip"},{label:(0,i.__)("Modal","modular-blocks-plugin"),value:"modal"},{label:(0,i.__)("Inline","modular-blocks-plugin"),value:"inline"}],onChange:e=>t({popupStyle:e})}),(0,o.createElement)(r.ToggleControl,{label:(0,i.__)("Nummern anzeigen","modular-blocks-plugin"),checked:h,onChange:e=>t({showNumbers:e})}),(0,o.createElement)(r.ToggleControl,{label:(0,i.__)("Automatisch schließen","modular-blocks-plugin"),checked:b,onChange:e=>t({autoClose:e})}),(0,o.createElement)(r.ToggleControl,{label:(0,i.__)("Zoom aktivieren","modular-blocks-plugin"),checked:k,onChange:e=>t({enableZoom:e})})),(0,o.createElement)(r.PanelBody,{title:(0,i.__)("Hotspots","modular-blocks-plugin"),initialOpen:!1},c.map((e,l)=>(0,o.createElement)(r.Card,{key:l,style:{marginBottom:"10px"}},(0,o.createElement)(r.CardHeader,null,(0,o.createElement)("div",{style:{display:"flex",justifyContent:"space-between",width:"100%"}},(0,o.createElement)("strong",null,e.title||`Hotspot ${l+1}`),(0,o.createElement)(r.Button,{onClick:()=>(e=>{const l=c.filter((t,l)=>l!==e);t({hotspots:l})})(l),icon:u,variant:"tertiary",size:"small",isDestructive:!0}))),(0,o.createElement)(r.CardBody,null,(0,o.createElement)(r.TextControl,{label:(0,i.__)("Titel","modular-blocks-plugin"),value:e.title,onChange:e=>C(l,"title",e)}),(0,o.createElement)(r.TextControl,{label:(0,i.__)("Inhalt","modular-blocks-plugin"),value:e.content,onChange:e=>C(l,"content",e)}),(0,o.createElement)(r.RangeControl,{label:(0,i.__)("X Position (%)","modular-blocks-plugin"),value:e.x,onChange:e=>C(l,"x",e),min:0,max:100}),(0,o.createElement)(r.RangeControl,{label:(0,i.__)("Y Position (%)","modular-blocks-plugin"),value:e.y,onChange:e=>C(l,"y",e),min:0,max:100}),(0,o.createElement)("div",null,(0,o.createElement)("label",null,(0,i.__)("Farbe","modular-blocks-plugin")),(0,o.createElement)(r.ColorPicker,{color:e.color,onChangeComplete:e=>C(l,"color",e.hex)}))))),(0,o.createElement)(r.Button,{onClick:()=>{const e=[...c,{x:50,y:50,title:`Hotspot ${c.length+1}`,content:"Neuer Hotspot",icon:"info",color:"#0073aa",size:"medium",animation:"pulse",trigger:"click"}];t({hotspots:e})},icon:p,variant:"secondary"},(0,i.__)("Hotspot hinzufügen","modular-blocks-plugin")))),(0,o.createElement)("div",{...y},(0,o.createElement)("div",{className:"point-of-interest-container"},n&&(0,o.createElement)("h3",null,n),s&&(0,o.createElement)("p",null,s),(0,o.createElement)("div",{className:"poi-preview",style:{height:`${v}px`,position:"relative",border:"1px solid #ddd"}},l.url?(0,o.createElement)(o.Fragment,null,(0,o.createElement)("img",{src:l.url,alt:l.alt,style:{width:"100%",height:"100%",objectFit:"cover"}}),c.map((e,t)=>(0,o.createElement)("div",{key:t,className:"hotspot-marker",style:{position:"absolute",left:`${e.x}%`,top:`${e.y}%`,width:"30px",height:"30px",borderRadius:"50%",backgroundColor:e.color,display:"flex",alignItems:"center",justifyContent:"center",color:"white",fontWeight:"bold",cursor:"pointer",transform:"translate(-50%, -50%)"}},h?t+1:"●"))):(0,o.createElement)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"100%",background:"#f0f0f0"}},(0,i.__)("Bitte wählen Sie ein Hintergrundbild","modular-blocks-plugin"))))))},save:({attributes:e})=>{const{backgroundImage:t,title:l,description:n,hotspots:r,hotspotStyle:s,popupStyle:c,popupPosition:u,showNumbers:p,autoClose:m,closeOnOutsideClick:d,height:g,enableZoom:h,zoomLevel:b}=e,_=a.useBlockProps.save(),v={hotspots:r,hotspotStyle:s,popupStyle:c,popupPosition:u,showNumbers:p,autoClose:m,closeOnOutsideClick:d,enableZoom:h,zoomLevel:b};return(0,o.createElement)("div",{..._,"data-poi-config":JSON.stringify(v)},(0,o.createElement)("div",{className:"point-of-interest-container"},l&&(0,o.createElement)("h3",{className:"poi-title"},l),n&&(0,o.createElement)("p",{className:"poi-description"},n),(0,o.createElement)("div",{className:"poi-image-container",style:{height:`${g}px`,position:"relative"}},t.url&&(0,o.createElement)(o.Fragment,null,(0,o.createElement)("img",{src:t.url,alt:t.alt,className:"poi-background"}),(0,o.createElement)("div",{className:"hotspots-layer"},r.map((e,t)=>(0,o.createElement)("button",{key:t,className:`hotspot hotspot-${s}`,style:{left:`${e.x}%`,top:`${e.y}%`,backgroundColor:e.color},"data-hotspot-index":t,"aria-label":e.title},p?t+1:"●"))),(0,o.createElement)("div",{className:"hotspot-popups"},r.map((e,t)=>(0,o.createElement)("div",{key:t,className:`hotspot-popup popup-${c}`,"data-popup-index":t,style:{display:"none"}},(0,o.createElement)("div",{className:"popup-header"},(0,o.createElement)("h4",null,e.title),(0,o.createElement)("button",{className:"popup-close","aria-label":(0,i.__)("Schließen","modular-blocks-plugin")},"×")),(0,o.createElement)("div",{className:"popup-content"},(0,o.createElement)("p",null,e.content)))))))))}})})();