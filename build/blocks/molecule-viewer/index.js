(()=>{"use strict";const e=window.React,l=window.wp.blocks,o=window.wp.blockEditor,t=window.wp.components,a=window.wp.i18n;(0,l.registerBlockType)("modular-blocks/molecule-viewer",{edit:({attributes:l,setAttributes:r})=>{const{sourceType:n,pdbId:u,structureUrl:c,structureData:i,displayStyle:s,colorScheme:p,backgroundColor:d,width:m,height:b,showControls:g,enableSpin:_,ariaLabel:k,description:h}=l,C=(0,o.useBlockProps)();return(0,e.createElement)(e.Fragment,null,(0,e.createElement)(o.InspectorControls,null,(0,e.createElement)(t.PanelBody,{title:(0,a.__)("Struktur-Quelle","modular-blocks-plugin")},(0,e.createElement)(t.SelectControl,{label:(0,a.__)("Quelle","modular-blocks-plugin"),value:n,options:[{label:(0,a.__)("PDB-ID","modular-blocks-plugin"),value:"pdb"},{label:(0,a.__)("URL","modular-blocks-plugin"),value:"url"},{label:(0,a.__)("Direkteingabe","modular-blocks-plugin"),value:"upload"}],onChange:e=>r({sourceType:e})}),"pdb"===n&&(0,e.createElement)(t.TextControl,{label:(0,a.__)("PDB-ID","modular-blocks-plugin"),value:u,onChange:e=>r({pdbId:e}),help:(0,a.__)("z.B. 1YCR","modular-blocks-plugin")}),"url"===n&&(0,e.createElement)(t.TextControl,{label:(0,a.__)("Struktur-URL","modular-blocks-plugin"),value:c,onChange:e=>r({structureUrl:e}),help:(0,a.__)("URL zu einer PDB/MOL/SDF-Datei","modular-blocks-plugin")}),"upload"===n&&(0,e.createElement)(t.TextareaControl,{label:(0,a.__)("Struktur-Daten","modular-blocks-plugin"),value:i,onChange:e=>r({structureData:e}),help:(0,a.__)("PDB/MOL-Format","modular-blocks-plugin"),rows:8})),(0,e.createElement)(t.PanelBody,{title:(0,a.__)("Darstellung","modular-blocks-plugin")},(0,e.createElement)(t.SelectControl,{label:(0,a.__)("Darstellungsstil","modular-blocks-plugin"),value:s,options:[{label:(0,a.__)("Stick","modular-blocks-plugin"),value:"stick"},{label:(0,a.__)("Kugel","modular-blocks-plugin"),value:"sphere"},{label:(0,a.__)("Cartoon","modular-blocks-plugin"),value:"cartoon"},{label:(0,a.__)("Linie","modular-blocks-plugin"),value:"line"},{label:(0,a.__)("Oberfläche","modular-blocks-plugin"),value:"surface"}],onChange:e=>r({displayStyle:e})}),(0,e.createElement)(t.SelectControl,{label:(0,a.__)("Farbschema","modular-blocks-plugin"),value:p,options:[{label:(0,a.__)("Standard","modular-blocks-plugin"),value:"default"},{label:(0,a.__)("Kohlenstoff","modular-blocks-plugin"),value:"carbon"},{label:(0,a.__)("Spektrum","modular-blocks-plugin"),value:"spectrum"},{label:(0,a.__)("Kette","modular-blocks-plugin"),value:"chain"},{label:(0,a.__)("Sekundärstruktur","modular-blocks-plugin"),value:"ss"}],onChange:e=>r({colorScheme:e})}),(0,e.createElement)(t.TextControl,{label:(0,a.__)("Hintergrundfarbe","modular-blocks-plugin"),value:d,onChange:e=>r({backgroundColor:e}),type:"color"})),(0,e.createElement)(t.PanelBody,{title:(0,a.__)("Einstellungen","modular-blocks-plugin")},(0,e.createElement)(t.RangeControl,{label:(0,a.__)("Breite (px)","modular-blocks-plugin"),value:m,onChange:e=>r({width:e}),min:400,max:1200}),(0,e.createElement)(t.RangeControl,{label:(0,a.__)("Höhe (px)","modular-blocks-plugin"),value:b,onChange:e=>r({height:e}),min:300,max:800}),(0,e.createElement)(t.ToggleControl,{label:(0,a.__)("Steuerung anzeigen","modular-blocks-plugin"),checked:g,onChange:e=>r({showControls:e})}),(0,e.createElement)(t.ToggleControl,{label:(0,a.__)("Auto-Rotation","modular-blocks-plugin"),checked:_,onChange:e=>r({enableSpin:e})}),(0,e.createElement)(t.TextControl,{label:(0,a.__)("Beschreibung","modular-blocks-plugin"),value:h,onChange:e=>r({description:e})}))),(0,e.createElement)("div",{...C},(0,e.createElement)("div",{className:"molecule-viewer-container"},(0,e.createElement)("div",{className:"molecule-preview",style:{width:`${m}px`,height:`${b}px`,backgroundColor:d,border:"1px solid #ddd",display:"flex",alignItems:"center",justifyContent:"center"}},(0,e.createElement)("div",{style:{textAlign:"center",color:"#fff"}},(0,e.createElement)("p",null,(0,e.createElement)("strong",null,(0,a.__)("3D Molekül-Viewer","modular-blocks-plugin"))),(0,e.createElement)("p",{style:{fontSize:"12px",marginTop:"10px"}},"pdb"===n&&(0,a.__)("PDB: "+u,"modular-blocks-plugin"),"url"===n&&(0,a.__)("URL: "+c,"modular-blocks-plugin"),"upload"===n&&(0,a.__)("Benutzerdefinierte Struktur","modular-blocks-plugin")),(0,e.createElement)("p",{style:{fontSize:"12px",marginTop:"5px"}},(0,a.__)("Stil: "+s+" | Farbe: "+p,"modular-blocks-plugin")),(0,e.createElement)("p",{style:{fontSize:"11px",marginTop:"10px",color:"#ccc"}},(0,a.__)("Der 3D-Viewer wird im Frontend mit 3Dmol.js gerendert","modular-blocks-plugin")))),h&&(0,e.createElement)("p",{style:{marginTop:"10px",fontSize:"14px",color:"#666"}},h))))},save:({attributes:l})=>{const{sourceType:t,pdbId:a,structureUrl:r,structureData:n,displayStyle:u,colorScheme:c,backgroundColor:i,width:s,height:p,showControls:d,enableSpin:m,ariaLabel:b,description:g}=l,_=o.useBlockProps.save(),k={sourceType:t,pdbId:a,structureUrl:r,structureData:n,displayStyle:u,colorScheme:c,backgroundColor:i,width:s,height:p,showControls:d,enableSpin:m};return(0,e.createElement)("div",{..._,"data-molecule-config":JSON.stringify(k)},(0,e.createElement)("div",{className:"molecule-viewer-container"},(0,e.createElement)("div",{className:"molecule-viewer",style:{width:`${s}px`,height:`${p}px`,backgroundColor:i},"aria-label":b}),g&&(0,e.createElement)("p",{className:"molecule-description"},g)))}})})();