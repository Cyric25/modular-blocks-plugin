!function(){"use strict";window.initMultipleChoice=function(e){if(!e)return;const t=e.getAttribute("data-quiz-config");if(!t)return;const c=JSON.parse(t),r=e.querySelector(".answers-section"),n=e.querySelector(".quiz-check"),o=e.querySelector(".quiz-retry"),s=e.querySelector(".quiz-solution"),i=e.querySelector(".quiz-results"),l=e.querySelector(".result-message"),a=e.querySelector(".score-display"),d=e.querySelector(".feedback-container");let u=!1,f=[];const y=e.querySelectorAll(".answer-input");function h(){const e=Array.from(r.querySelectorAll(".answer-option"));for(let t=e.length-1;t>0;t--){const c=Math.floor(Math.random()*(t+1));[e[t],e[c]]=[e[c],e[t]]}e.forEach(e=>r.appendChild(e))}c.randomizeAnswers&&h(),n&&n.addEventListener("click",function(){c.confirmCheck&&!confirm("Möchten Sie Ihre Antworten wirklich überprüfen?")||(u=!0,function(){f=[];let e=0,t=0,r="";c.answers.forEach(e=>{e.isCorrect&&t++}),y.forEach((t,n)=>{const o=t.closest(".answer-option"),s="true"===t.getAttribute("data-is-correct"),i=t.checked,l=t.getAttribute("data-feedback");f.push({index:n,isCorrect:s,isSelected:i,feedback:l}),o.classList.remove("correct","incorrect","correct-not-selected"),i?s?(o.classList.add("correct"),e++):o.classList.add("incorrect"):s&&o.classList.add("correct-not-selected"),c.showFeedback&&i&&l&&(r+=`<div class="answer-feedback ${s?"correct":"incorrect"}">\n\t\t\t\t\t\t<strong>${s?"✓":"✗"}</strong> ${l}\n\t\t\t\t\t</div>`),t.disabled=!0}),function(e,t,r){if(!i)return;i.style.display="block";const n=t>0?e/t*100:0;let o="";if(o=n>=c.passPercentage?c.successText:c.failText,l&&(l.textContent=o,l.className="result-message "+(n>=c.passPercentage?"success":"fail")),a){const r=c.scoreText.replace("@score",e).replace("@total",t);a.textContent=r}d&&c.showFeedback&&r&&(d.innerHTML=r)}(e,t,r),n.style.display="none",o&&(o.style.display="inline-block"),s&&(s.style.display="inline-block")}())}),o&&o.addEventListener("click",function(){c.confirmRetry&&!confirm("Möchten Sie wirklich von vorne beginnen?")||(u=!1,f=[],y.forEach(e=>{e.checked=!1,e.disabled=!1,e.closest(".answer-option").classList.remove("correct","incorrect","correct-not-selected")}),c.randomizeAnswers&&h(),i&&(i.style.display="none"),d&&(d.innerHTML=""),n.style.display="inline-block",o&&(o.style.display="none"),s&&(s.style.display="none"))}),s&&s.addEventListener("click",function(){y.forEach(e=>{e.checked=!1,e.closest(".answer-option").classList.remove("correct","incorrect","correct-not-selected")}),y.forEach((e,t)=>{const c="true"===e.getAttribute("data-is-correct"),r=e.closest(".answer-option");c&&(e.checked=!0,r.classList.add("correct","solution")),e.disabled=!0});let e=0;c.answers.forEach(t=>{t.isCorrect&&e++}),i&&(i.style.display="block",l&&(l.textContent="Lösung wird angezeigt.",l.className="result-message solution"),a&&(a.textContent=`${e} von ${e} richtig`)),d&&(d.innerHTML=""),s&&(s.style.display="none")}),c.multipleCorrect||y.forEach(e=>{e.addEventListener("change",function(){u||y.forEach(t=>{t!==e&&(t.checked=!1)})})})},document.addEventListener("DOMContentLoaded",function(){document.querySelectorAll(".wp-block-modular-blocks-multiple-choice").forEach(e=>{window.initMultipleChoice(e)})})}();