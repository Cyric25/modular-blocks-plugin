(()=>{"use strict";var e={20:(e,t,l)=>{var n=l(609),a=Symbol.for("react.element"),r=(Symbol.for("react.fragment"),Object.prototype.hasOwnProperty),o=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};t.jsx=function(e,t,l){var n,i={},c=null,u=null;for(n in void 0!==l&&(c=""+l),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(u=t.ref),t)r.call(t,n)&&!s.hasOwnProperty(n)&&(i[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps)void 0===i[n]&&(i[n]=t[n]);return{$$typeof:a,type:e,key:c,ref:u,props:i,_owner:o.current}}},609:e=>{e.exports=window.React},848:(e,t,l)=>{e.exports=l(20)}},t={};function l(n){var a=t[n];if(void 0!==a)return a.exports;var r=t[n]={exports:{}};return e[n](r,r.exports,l),r.exports}var n=l(609);const a=window.wp.blocks,r=window.wp.blockEditor,o=window.wp.components,s=window.wp.i18n,i=window.wp.primitives;var c=l(848);const u=(0,c.jsx)(i.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,c.jsx)(i.Path,{fillRule:"evenodd",clipRule:"evenodd",d:"M12 5.5A2.25 2.25 0 0 0 9.878 7h4.244A2.251 2.251 0 0 0 12 5.5ZM12 4a3.751 3.751 0 0 0-3.675 3H5v1.5h1.27l.818 8.997a2.75 2.75 0 0 0 2.739 2.501h4.347a2.75 2.75 0 0 0 2.738-2.5L17.73 8.5H19V7h-3.325A3.751 3.751 0 0 0 12 4Zm4.224 4.5H7.776l.806 8.861a1.25 1.25 0 0 0 1.245 1.137h4.347a1.25 1.25 0 0 0 1.245-1.137l.805-8.861Z"})}),m=(0,c.jsx)(i.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,c.jsx)(i.Path,{d:"M11 12.5V17.5H12.5V12.5H17.5V11H12.5V6H11V11H6V12.5H11Z"})});(0,a.registerBlockType)("modular-blocks/multiple-choice",{edit:({attributes:e,setAttributes:t})=>{const{question:l,questionImage:a,answers:i,multipleCorrect:c,randomizeAnswers:d,showFeedback:p,showTips:g,showRetry:h,showSolution:b,confirmCheck:w,confirmRetry:k,passPercentage:_,scoreText:E,successText:x,failText:v}=e,C=(0,r.useBlockProps)(),f=(e,l,n)=>{const a=[...i];a[e]={...a[e],[l]:n},t({answers:a})},y=i.filter(e=>e.isCorrect).length,T=y>0;return(0,n.createElement)(n.Fragment,null,(0,n.createElement)(r.InspectorControls,null,(0,n.createElement)(o.PanelBody,{title:(0,s.__)("Frage-Einstellungen","modular-blocks-plugin")},(0,n.createElement)("div",{style:{marginBottom:"15px"}},(0,n.createElement)("strong",null,(0,s.__)("Bild zur Frage (optional)","modular-blocks-plugin")),(0,n.createElement)("div",{style:{display:"flex",alignItems:"center",gap:"10px",marginTop:"5px"}},(0,n.createElement)(r.MediaUploadCheck,null,(0,n.createElement)(r.MediaUpload,{onSelect:e=>{t({questionImage:{url:e.url,alt:e.alt,id:e.id}})},allowedTypes:["image"],value:a.id,render:({open:e})=>(0,n.createElement)(o.Button,{onClick:e,variant:"secondary",size:"small"},a.url?(0,s.__)("Bild ändern","modular-blocks-plugin"):(0,s.__)("Bild auswählen","modular-blocks-plugin"))})),a.url&&(0,n.createElement)(o.Button,{onClick:()=>{t({questionImage:{url:"",alt:"",id:null}})},variant:"tertiary",size:"small",isDestructive:!0},(0,s.__)("Entfernen","modular-blocks-plugin"))),a.url&&(0,n.createElement)("img",{src:a.url,alt:a.alt,style:{maxWidth:"100%",marginTop:"10px",borderRadius:"4px"}})),(0,n.createElement)(o.ToggleControl,{label:(0,s.__)("Mehrere richtige Antworten erlauben","modular-blocks-plugin"),checked:c,onChange:e=>{if(t({multipleCorrect:e}),!e&&y>1){const e=[...i];let l=!1;e.forEach((t,n)=>{t.isCorrect&&l?e[n].isCorrect=!1:t.isCorrect&&!l&&(l=!0)}),t({answers:e})}}}),(0,n.createElement)(o.ToggleControl,{label:(0,s.__)("Antworten zufällig anordnen","modular-blocks-plugin"),checked:d,onChange:e=>t({randomizeAnswers:e})})),(0,n.createElement)(o.PanelBody,{title:(0,s.__)("Feedback & Verhalten","modular-blocks-plugin")},(0,n.createElement)(o.ToggleControl,{label:(0,s.__)("Feedback anzeigen","modular-blocks-plugin"),checked:p,onChange:e=>t({showFeedback:e})}),(0,n.createElement)(o.ToggleControl,{label:(0,s.__)("Tipps anzeigen","modular-blocks-plugin"),checked:g,onChange:e=>t({showTips:e})}),(0,n.createElement)(o.ToggleControl,{label:(0,s.__)("Wiederholen-Button anzeigen","modular-blocks-plugin"),checked:h,onChange:e=>t({showRetry:e})}),(0,n.createElement)(o.ToggleControl,{label:(0,s.__)("Lösung-Button anzeigen","modular-blocks-plugin"),checked:b,onChange:e=>t({showSolution:e})}),(0,n.createElement)(o.ToggleControl,{label:(0,s.__)("Bestätigung vor Prüfung","modular-blocks-plugin"),checked:w,onChange:e=>t({confirmCheck:e})}),(0,n.createElement)(o.ToggleControl,{label:(0,s.__)("Bestätigung vor Wiederholung","modular-blocks-plugin"),checked:k,onChange:e=>t({confirmRetry:e})}),(0,n.createElement)(o.RangeControl,{label:(0,s.__)("Bestehen-Schwelle (%)","modular-blocks-plugin"),value:_,onChange:e=>t({passPercentage:e}),min:0,max:100,step:5})),(0,n.createElement)(o.PanelBody,{title:(0,s.__)("Texte anpassen","modular-blocks-plugin")},(0,n.createElement)(o.TextControl,{label:(0,s.__)("Punkte-Text","modular-blocks-plugin"),value:E,onChange:e=>t({scoreText:e}),help:(0,s.__)("Verwenden Sie @score und @total als Platzhalter.","modular-blocks-plugin")}),(0,n.createElement)(o.TextControl,{label:(0,s.__)("Erfolg-Text","modular-blocks-plugin"),value:x,onChange:e=>t({successText:e})}),(0,n.createElement)(o.TextControl,{label:(0,s.__)("Fehlschlag-Text","modular-blocks-plugin"),value:v,onChange:e=>t({failText:e})}))),(0,n.createElement)("div",{...C,className:"editor-view"},(0,n.createElement)("div",{className:"multiple-choice-container"},(0,n.createElement)("div",{className:"question-section"},a.url&&(0,n.createElement)("div",{className:"question-image"},(0,n.createElement)("img",{src:a.url,alt:a.alt})),(0,n.createElement)(r.RichText,{tagName:"div",className:"question-text",value:l,onChange:e=>t({question:e}),placeholder:(0,s.__)("Geben Sie Ihre Frage ein...","modular-blocks-plugin"),allowedFormats:["core/bold","core/italic","core/link"]})),(0,n.createElement)("div",{className:"answers-section"},i.map((e,l)=>(0,n.createElement)(o.Card,{key:l,className:"answer-card"},(0,n.createElement)(o.CardHeader,null,(0,n.createElement)("div",{style:{display:"flex",alignItems:"center",gap:"10px",width:"100%"}},(0,n.createElement)("label",{style:{display:"flex",alignItems:"center",gap:"8px",cursor:"pointer",flex:1}},(0,n.createElement)("input",{type:c?"checkbox":"radio",checked:e.isCorrect,onChange:()=>(e=>{const l=[...i];c?l[e].isCorrect=!l[e].isCorrect:l.forEach((t,n)=>{l[n].isCorrect=n===e}),t({answers:l})})(l),style:{margin:0}}),(0,n.createElement)("span",{style:{fontWeight:e.isCorrect?"bold":"normal",color:e.isCorrect?"#00a32a":"#1e1e1e"}},c||e.isCorrect?(0,s.__)("Richtig","modular-blocks-plugin"):(0,s.__)("Falsch","modular-blocks-plugin"))),i.length>2&&(0,n.createElement)(o.Button,{onClick:()=>(e=>{if(i.length<=2)return;const l=i.filter((t,l)=>l!==e);t({answers:l})})(l),icon:u,variant:"tertiary",size:"small",isDestructive:!0,label:(0,s.__)("Antwort entfernen","modular-blocks-plugin")}))),(0,n.createElement)(o.CardBody,null,(0,n.createElement)(r.RichText,{tagName:"div",className:"answer-text-input",value:e.text,onChange:e=>f(l,"text",e),placeholder:(0,s.__)("Antworttext eingeben...","modular-blocks-plugin"),allowedFormats:["core/bold","core/italic"]}),p&&(0,n.createElement)(o.TextareaControl,{label:(0,s.__)("Feedback","modular-blocks-plugin"),value:e.feedback,onChange:e=>f(l,"feedback",e),placeholder:(0,s.__)("Feedback für diese Antwort...","modular-blocks-plugin"),rows:2}),g&&(0,n.createElement)(o.TextControl,{label:(0,s.__)("Tipp (wird beim Hover angezeigt)","modular-blocks-plugin"),value:e.tip,onChange:e=>f(l,"tip",e),placeholder:(0,s.__)("Hilfreicher Tipp...","modular-blocks-plugin")}))))),(0,n.createElement)("div",{className:"add-answer-section",style:{margin:"20px 0"}},(0,n.createElement)(o.Button,{onClick:()=>{const e=[...i,{text:`Antwort ${String.fromCharCode(65+i.length)}`,isCorrect:!1,feedback:"",tip:""}];t({answers:e})},icon:m,variant:"secondary",disabled:i.length>=8},(0,s.__)("Antwort hinzufügen","modular-blocks-plugin"))),(0,n.createElement)("div",{className:"quiz-status",style:{padding:"15px",backgroundColor:T?"#d7eddb":"#fcf2cd",border:"1px solid "+(T?"#00a32a":"#dba617"),borderRadius:"4px",marginTop:"20px"}},(0,n.createElement)("div",{style:{display:"flex",alignItems:"center",gap:"8px"}},(0,n.createElement)(o.Icon,{icon:T?"yes-alt":"warning",style:{color:T?"#00a32a":"#dba617"}}),(0,n.createElement)("strong",null,T?(0,s.__)("Quiz bereit!","modular-blocks-plugin"):(0,s.__)("Markieren Sie mindestens eine richtige Antwort","modular-blocks-plugin"))),(0,n.createElement)("div",{style:{fontSize:"13px",color:"#646970",marginTop:"5px"}},c?(0,s.__)(`${y} richtige Antworten von ${i.length}`,"modular-blocks-plugin"):(0,s.__)(`${y} richtige Antwort von ${i.length}`,"modular-blocks-plugin"))),(0,n.createElement)("div",{className:"editor-notice",style:{marginTop:"15px",padding:"10px",backgroundColor:"#f0f6fc",borderLeft:"4px solid #0073aa",fontSize:"12px",color:"#646970"}},(0,s.__)("Vorschau: Das interaktive Quiz funktioniert im Frontend. Im Editor können Sie die Inhalte bearbeiten.","modular-blocks-plugin")))))},save:({attributes:e})=>{const{question:t,questionImage:l,answers:a,multipleCorrect:o,randomizeAnswers:i,showFeedback:c,showTips:u,showRetry:m,showSolution:d,confirmCheck:p,confirmRetry:g,passPercentage:h,scoreText:b,successText:w,failText:k}=e,_=r.useBlockProps.save(),E=i?[...a]:a,x={multipleCorrect:o,randomizeAnswers:i,showFeedback:c,showTips:u,showRetry:m,showSolution:d,confirmCheck:p,confirmRetry:g,passPercentage:h,scoreText:b,successText:w,failText:k,answers:a.map(e=>({text:e.text,isCorrect:e.isCorrect,feedback:e.feedback,tip:e.tip}))};return(0,n.createElement)("div",{..._,"data-quiz-config":JSON.stringify(x)},(0,n.createElement)("div",{className:"multiple-choice-container"},(0,n.createElement)("div",{className:"question-section"},l.url&&(0,n.createElement)("div",{className:"question-image"},(0,n.createElement)("img",{src:l.url,alt:l.alt})),(0,n.createElement)(r.RichText.Content,{tagName:"div",className:"question-text",value:t})),(0,n.createElement)("div",{className:"answers-section"},E.map((e,t)=>(0,n.createElement)("div",{key:t,className:"answer-option","data-answer-index":t},(0,n.createElement)("input",{type:o?"checkbox":"radio",name:"quiz-answer",id:`answer-${t}`,className:"answer-input"}),(0,n.createElement)("label",{htmlFor:`answer-${t}`,className:"answer-label",title:u&&e.tip?e.tip:""},(0,n.createElement)(r.RichText.Content,{tagName:"span",className:"answer-text",value:e.text}))))),(0,n.createElement)("div",{className:"quiz-controls"},(0,n.createElement)("button",{type:"button",className:"quiz-button quiz-check"},(0,s.__)("Prüfen","modular-blocks-plugin")),m&&(0,n.createElement)("button",{type:"button",className:"quiz-button quiz-retry",style:{display:"none"}},(0,s.__)("Wiederholen","modular-blocks-plugin")),d&&(0,n.createElement)("button",{type:"button",className:"quiz-button quiz-solution",style:{display:"none"}},(0,s.__)("Lösung anzeigen","modular-blocks-plugin"))),(0,n.createElement)("div",{className:"quiz-results",style:{display:"none"}},(0,n.createElement)("div",{className:"result-message"}),(0,n.createElement)("div",{className:"score-display"}))))}})})();